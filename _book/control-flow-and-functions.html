<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Control flow and functions | FST 5984: SS Data Analytics for Food and Ag Science</title>
  <meta name="description" content="<p>This bookdown is the compiled and unedited lectures from the Spring 2022
Virginia Tech Course FST 5984: SS Data Analytics for Food and Ag Science.</p>" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Control flow and functions | FST 5984: SS Data Analytics for Food and Ag Science" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This bookdown is the compiled and unedited lectures from the Spring 2022
Virginia Tech Course FST 5984: SS Data Analytics for Food and Ag Science.</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Control flow and functions | FST 5984: SS Data Analytics for Food and Ag Science" />
  
  <meta name="twitter:description" content="<p>This bookdown is the compiled and unedited lectures from the Spring 2022
Virginia Tech Course FST 5984: SS Data Analytics for Food and Ag Science.</p>" />
  

<meta name="author" content="Jacob Lahne" />


<meta name="date" content="2022-07-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="extending-r-with-packages-and-r-markdown.html"/>
<link rel="next" href="wrangling-your-data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data analytics for food and ag science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-description"><i class="fa fa-check"></i>Course description</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-learning-objectives"><i class="fa fa-check"></i>Course Learning Objectives</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-should-i-do-with-this-material"><i class="fa fa-check"></i>What should I do with this material?</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="day-1---welcome-to-fst-5984-2022.html"><a href="day-1---welcome-to-fst-5984-2022.html"><i class="fa fa-check"></i><b>1</b> Day 1 - Welcome to FST 5984 (2022)</a>
<ul>
<li class="chapter" data-level="1.0.1" data-path="day-1---welcome-to-fst-5984-2022.html"><a href="day-1---welcome-to-fst-5984-2022.html#syllabus-review"><i class="fa fa-check"></i><b>1.0.1</b> Syllabus Review</a></li>
<li class="chapter" data-level="1.0.2" data-path="day-1---welcome-to-fst-5984-2022.html"><a href="day-1---welcome-to-fst-5984-2022.html#getting-set-up-for-class"><i class="fa fa-check"></i><b>1.0.2</b> Getting set up for class</a></li>
<li class="chapter" data-level="1.1" data-path="day-1---welcome-to-fst-5984-2022.html"><a href="day-1---welcome-to-fst-5984-2022.html#coding"><i class="fa fa-check"></i><b>1.1</b> Coding</a></li>
<li class="chapter" data-level="1.2" data-path="day-1---welcome-to-fst-5984-2022.html"><a href="day-1---welcome-to-fst-5984-2022.html#how-to-make-errors-and-annoy-computers"><i class="fa fa-check"></i><b>1.2</b> How to make errors and annoy computers</a></li>
<li class="chapter" data-level="1.3" data-path="day-1---welcome-to-fst-5984-2022.html"><a href="day-1---welcome-to-fst-5984-2022.html#inputs-and-data-types-in-r"><i class="fa fa-check"></i><b>1.3</b> Inputs and data types in R</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="day-1---welcome-to-fst-5984-2022.html"><a href="day-1---welcome-to-fst-5984-2022.html#whitespace"><i class="fa fa-check"></i><b>1.3.1</b> Whitespace</a></li>
<li class="chapter" data-level="1.3.2" data-path="day-1---welcome-to-fst-5984-2022.html"><a href="day-1---welcome-to-fst-5984-2022.html#data-types"><i class="fa fa-check"></i><b>1.3.2</b> Data types</a></li>
<li class="chapter" data-level="1.3.3" data-path="day-1---welcome-to-fst-5984-2022.html"><a href="day-1---welcome-to-fst-5984-2022.html#ok-but-what-kind-of-object-is-print-then"><i class="fa fa-check"></i><b>1.3.3</b> Ok, but what kind of object <em>is</em> <code>print()</code> then?</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="day-1---welcome-to-fst-5984-2022.html"><a href="day-1---welcome-to-fst-5984-2022.html#metacognition-learning-to-learn-in-r"><i class="fa fa-check"></i><b>1.4</b> Metacognition: Learning to Learn in R</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html"><i class="fa fa-check"></i><b>2</b> Extending R with packages and R Markdown</a>
<ul>
<li class="chapter" data-level="2.1" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#all-about-r-markdown"><i class="fa fa-check"></i><b>2.1</b> All about R Markdown</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#what-is-an-r-script"><i class="fa fa-check"></i><b>2.1.1</b> What is an R script?</a></li>
<li class="chapter" data-level="2.1.2" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#how-do-we-make-an-r-markdown-document"><i class="fa fa-check"></i><b>2.1.2</b> How do we make an R Markdown document?</a></li>
<li class="chapter" data-level="2.1.3" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#elements-of-r-markdown-documents"><i class="fa fa-check"></i><b>2.1.3</b> Elements of R Markdown documents</a></li>
<li class="chapter" data-level="2.1.4" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#knitting-r-markdown-documents"><i class="fa fa-check"></i><b>2.1.4</b> “Knitting” R Markdown documents</a></li>
<li class="chapter" data-level="2.1.5" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#joplin---an-easy-way-to-learn-basic-markdown"><i class="fa fa-check"></i><b>2.1.5</b> Joplin - an easy way to learn basic Markdown</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#extending-r---packages"><i class="fa fa-check"></i><b>2.2</b> Extending R - Packages</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#what-are-packages"><i class="fa fa-check"></i><b>2.2.1</b> What are packages?</a></li>
<li class="chapter" data-level="2.2.2" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#installing-packages"><i class="fa fa-check"></i><b>2.2.2</b> Installing packages</a></li>
<li class="chapter" data-level="2.2.3" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#using-packages"><i class="fa fa-check"></i><b>2.2.3</b> Using packages</a></li>
<li class="chapter" data-level="2.2.4" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#detaching-unloading-packages"><i class="fa fa-check"></i><b>2.2.4</b> Detaching (unloading) packages</a></li>
<li class="chapter" data-level="2.2.5" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#uninstalling-packages"><i class="fa fa-check"></i><b>2.2.5</b> Uninstalling packages</a></li>
<li class="chapter" data-level="2.2.6" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#getting-help---a-deeper-drive"><i class="fa fa-check"></i><b>2.2.6</b> Getting help - a deeper drive</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#complex-r-objects"><i class="fa fa-check"></i><b>2.3</b> Complex R Objects</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#vectors-a-review"><i class="fa fa-check"></i><b>2.3.1</b> Vectors: a review</a></li>
<li class="chapter" data-level="2.3.2" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#vector-math"><i class="fa fa-check"></i><b>2.3.2</b> Vector math</a></li>
<li class="chapter" data-level="2.3.3" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#indexing-getting-elements-from-a-vector"><i class="fa fa-check"></i><b>2.3.3</b> “Indexing”: getting elements from a vector</a></li>
<li class="chapter" data-level="2.3.4" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#multidimensional-vectors-matrices-and-arrays"><i class="fa fa-check"></i><b>2.3.4</b> Multidimensional vectors: Matrices and Arrays</a></li>
<li class="chapter" data-level="2.3.5" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#lists-non-atomic-vectors"><i class="fa fa-check"></i><b>2.3.5</b> Lists: non-atomic vectors</a></li>
<li class="chapter" data-level="2.3.6" data-path="extending-r-with-packages-and-r-markdown.html"><a href="extending-r-with-packages-and-r-markdown.html#data.frame-tables-of-data"><i class="fa fa-check"></i><b>2.3.6</b> <code>data.frame</code>: Tables of data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html"><i class="fa fa-check"></i><b>3</b> Control flow and functions</a>
<ul>
<li class="chapter" data-level="3.1" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html#functions"><i class="fa fa-check"></i><b>3.1</b> Functions</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html#introduction---quasi-mathematical-definition"><i class="fa fa-check"></i><b>3.1.1</b> Introduction - quasi-mathematical definition</a></li>
<li class="chapter" data-level="3.1.2" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html#everything-weve-been-using-in-r-is-a-function"><i class="fa fa-check"></i><b>3.1.2</b> Everything we’ve been using in R is a function</a></li>
<li class="chapter" data-level="3.1.3" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html#back-to-reading-the-function-structure"><i class="fa fa-check"></i><b>3.1.3</b> Back to <code>?</code>: Reading the function structure</a></li>
<li class="chapter" data-level="3.1.4" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html#function-arguments"><i class="fa fa-check"></i><b>3.1.4</b> Function arguments</a></li>
<li class="chapter" data-level="3.1.5" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html#writing-your-own-functions"><i class="fa fa-check"></i><b>3.1.5</b> Writing your own functions</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html#control-structure---making-your-code-hustle-and-flow"><i class="fa fa-check"></i><b>3.2</b> Control structure - making your code hustle and flow</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html#write-what-you-want-pseudo-code"><i class="fa fa-check"></i><b>3.2.1</b> Write-what-you-want: Pseudo Code</a></li>
<li class="chapter" data-level="3.2.2" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html#logical-conditions"><i class="fa fa-check"></i><b>3.2.2</b> Logical conditions</a></li>
<li class="chapter" data-level="3.2.3" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html#conditional-statements"><i class="fa fa-check"></i><b>3.2.3</b> Conditional statements</a></li>
<li class="chapter" data-level="3.2.4" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html#if-statements"><i class="fa fa-check"></i><b>3.2.4</b> IF statements</a></li>
<li class="chapter" data-level="3.2.5" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html#loops"><i class="fa fa-check"></i><b>3.2.5</b> Loops</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html#simulating-and-sampling-data-in-r"><i class="fa fa-check"></i><b>3.3</b> Simulating and sampling data in R</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html#why-simulation-is-important"><i class="fa fa-check"></i><b>3.3.1</b> Why simulation is important</a></li>
<li class="chapter" data-level="3.3.2" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html#predictable-sequences"><i class="fa fa-check"></i><b>3.3.2</b> Predictable sequences</a></li>
<li class="chapter" data-level="3.3.3" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html#random-numbers"><i class="fa fa-check"></i><b>3.3.3</b> “Random” numbers</a></li>
<li class="chapter" data-level="3.3.4" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html#sampling-from-existing-data"><i class="fa fa-check"></i><b>3.3.4</b> Sampling from existing data</a></li>
<li class="chapter" data-level="3.3.5" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html#summary---sampling-and-simulation"><i class="fa fa-check"></i><b>3.3.5</b> Summary - sampling and simulation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="control-flow-and-functions.html"><a href="control-flow-and-functions.html#references"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="wrangling-your-data.html"><a href="wrangling-your-data.html"><i class="fa fa-check"></i><b>4</b> Wrangling your data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="wrangling-your-data.html"><a href="wrangling-your-data.html#getting-your-data-into-r"><i class="fa fa-check"></i><b>4.1</b> Getting your data into R</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="wrangling-your-data.html"><a href="wrangling-your-data.html#data-storage-outside-r"><i class="fa fa-check"></i><b>4.1.1</b> Data storage <em>outside</em> R</a></li>
<li class="chapter" data-level="4.1.2" data-path="wrangling-your-data.html"><a href="wrangling-your-data.html#read.table"><i class="fa fa-check"></i><b>4.1.2</b> <code>read.table()</code></a></li>
<li class="chapter" data-level="4.1.3" data-path="wrangling-your-data.html"><a href="wrangling-your-data.html#read.csv"><i class="fa fa-check"></i><b>4.1.3</b> <code>read.csv()</code></a></li>
<li class="chapter" data-level="4.1.4" data-path="wrangling-your-data.html"><a href="wrangling-your-data.html#hard"><i class="fa fa-check"></i><b>4.1.4</b> Why data storage is hard</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="wrangling-your-data.html"><a href="wrangling-your-data.html#making-your-life-in-r-easier-with-the-tidyverse"><i class="fa fa-check"></i><b>4.2</b> Making your life in R easier with the <code>tidyverse</code></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="wrangling-your-data.html"><a href="wrangling-your-data.html#naming-long-tidy-vs-wide-data"><i class="fa fa-check"></i><b>4.2.1</b> Naming: long (“tidy”) vs wide data</a></li>
<li class="chapter" data-level="4.2.2" data-path="wrangling-your-data.html"><a href="wrangling-your-data.html#one-pipe-to-rule-them-all"><i class="fa fa-check"></i><b>4.2.2</b> One pipe to rule them all: <code>%&gt;%</code></a></li>
<li class="chapter" data-level="4.2.3" data-path="wrangling-your-data.html"><a href="wrangling-your-data.html#tibble"><i class="fa fa-check"></i><b>4.2.3</b> The <code>tibble()</code></a></li>
<li class="chapter" data-level="4.2.4" data-path="wrangling-your-data.html"><a href="wrangling-your-data.html#select"><i class="fa fa-check"></i><b>4.2.4</b> Pick columns: <code>select()</code></a></li>
<li class="chapter" data-level="4.2.5" data-path="wrangling-your-data.html"><a href="wrangling-your-data.html#pick-rows-filter"><i class="fa fa-check"></i><b>4.2.5</b> Pick rows: <code>filter()</code></a></li>
<li class="chapter" data-level="4.2.6" data-path="wrangling-your-data.html"><a href="wrangling-your-data.html#make-new-columns-mutate"><i class="fa fa-check"></i><b>4.2.6</b> Make new columns: <code>mutate()</code></a></li>
<li class="chapter" data-level="4.2.7" data-path="wrangling-your-data.html"><a href="wrangling-your-data.html#create-quick-data-summaries-group_by-count-and-summarize"><i class="fa fa-check"></i><b>4.2.7</b> Create quick data summaries: <code>group_by()</code>, <code>count()</code>, and <code>summarize()</code></a></li>
<li class="chapter" data-level="4.2.8" data-path="wrangling-your-data.html"><a href="wrangling-your-data.html#utilities-for-data-management"><i class="fa fa-check"></i><b>4.2.8</b> Utilities for data management</a></li>
<li class="chapter" data-level="4.2.9" data-path="wrangling-your-data.html"><a href="wrangling-your-data.html#reading-data-tidily-read_"><i class="fa fa-check"></i><b>4.2.9</b> Reading data tidily: <code>read_*()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="wrangling-your-data.html"><a href="wrangling-your-data.html#review-of-functions"><i class="fa fa-check"></i><b>4.3</b> Review of functions</a></li>
<li class="chapter" data-level="" data-path="wrangling-your-data.html"><a href="wrangling-your-data.html#references-1"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="exploring-your-data-visually.html"><a href="exploring-your-data-visually.html"><i class="fa fa-check"></i><b>5</b> Exploring your data visually</a>
<ul>
<li class="chapter" data-level="5.1" data-path="exploring-your-data-visually.html"><a href="exploring-your-data-visually.html#reasons-for-developing-competency-with-data-visualization"><i class="fa fa-check"></i><b>5.1</b> Reasons for developing competency with data visualization</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="exploring-your-data-visually.html"><a href="exploring-your-data-visually.html#to-help-you-explore-your-data"><i class="fa fa-check"></i><b>5.1.1</b> To help you explore your data</a></li>
<li class="chapter" data-level="5.1.2" data-path="exploring-your-data-visually.html"><a href="exploring-your-data-visually.html#stakeholders"><i class="fa fa-check"></i><b>5.1.2</b> For communication to stakeholders</a></li>
<li class="chapter" data-level="5.1.3" data-path="exploring-your-data-visually.html"><a href="exploring-your-data-visually.html#for-argumentation"><i class="fa fa-check"></i><b>5.1.3</b> For argumentation</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="exploring-your-data-visually.html"><a href="exploring-your-data-visually.html#plotting-in-base-r"><i class="fa fa-check"></i><b>5.2</b> Plotting in base R</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="exploring-your-data-visually.html"><a href="exploring-your-data-visually.html#histograms-with-hist"><i class="fa fa-check"></i><b>5.2.1</b> Histograms with <code id="histograms">hist()</code></a></li>
<li class="chapter" data-level="5.2.2" data-path="exploring-your-data-visually.html"><a href="exploring-your-data-visually.html#boxplots-with-boxplot"><i class="fa fa-check"></i><b>5.2.2</b> Boxplots with <code>boxplot()</code></a></li>
<li class="chapter" data-level="5.2.3" data-path="exploring-your-data-visually.html"><a href="exploring-your-data-visually.html#generic-plot"><i class="fa fa-check"></i><b>5.2.3</b> Generic <code>plot()</code></a></li>
<li class="chapter" data-level="5.2.4" data-path="exploring-your-data-visually.html"><a href="exploring-your-data-visually.html#saving-plots-to-file"><i class="fa fa-check"></i><b>5.2.4</b> Saving plots to file</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="exploring-your-data-visually.html"><a href="exploring-your-data-visually.html#the-grammar-of-graphics-ggplot2"><i class="fa fa-check"></i><b>5.3</b> The ‘grammar of graphics’: <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="exploring-your-data-visually.html"><a href="exploring-your-data-visually.html#anatomy-of-a-ggplot"><i class="fa fa-check"></i><b>5.3.1</b> Anatomy of a <code>ggplot()</code></a></li>
<li class="chapter" data-level="5.3.2" data-path="exploring-your-data-visually.html"><a href="exploring-your-data-visually.html#common-recipes-for-basic-tasks"><i class="fa fa-check"></i><b>5.3.2</b> Common recipes for basic tasks</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="exploring-your-data-visually.html"><a href="exploring-your-data-visually.html#tidy"><i class="fa fa-check"></i><b>5.4</b> Return to data wrangling - long vs wide</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="exploring-your-data-visually.html"><a href="exploring-your-data-visually.html#making-data-tidy"><i class="fa fa-check"></i><b>5.4.1</b> Making data tidy</a></li>
<li class="chapter" data-level="5.4.2" data-path="exploring-your-data-visually.html"><a href="exploring-your-data-visually.html#making-data-wide"><i class="fa fa-check"></i><b>5.4.2</b> Making data wide</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="exploring-your-data-visually.html"><a href="exploring-your-data-visually.html#references-2"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="describing-your-data.html"><a href="describing-your-data.html"><i class="fa fa-check"></i><b>6</b> Describing your data</a>
<ul>
<li class="chapter" data-level="6.1" data-path="describing-your-data.html"><a href="describing-your-data.html#datasets"><i class="fa fa-check"></i><b>6.1</b> Datasets</a></li>
<li class="chapter" data-level="6.2" data-path="describing-your-data.html"><a href="describing-your-data.html#review-exercise-how-did-i-import-these-datasets"><i class="fa fa-check"></i><b>6.2</b> Review exercise: How did I import these datasets?</a></li>
<li class="chapter" data-level="6.3" data-path="describing-your-data.html"><a href="describing-your-data.html#what-kind-of-data-do-you-have"><i class="fa fa-check"></i><b>6.3</b> What kind of data do you have?</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="describing-your-data.html"><a href="describing-your-data.html#basic-attributes"><i class="fa fa-check"></i><b>6.3.1</b> Basic attributes</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="describing-your-data.html"><a href="describing-your-data.html#examining-big-data-frames"><i class="fa fa-check"></i><b>6.4</b> Examining big data frames</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="describing-your-data.html"><a href="describing-your-data.html#dplyrglimpse"><i class="fa fa-check"></i><b>6.4.1</b> <code>dplyr::glimpse()</code></a></li>
<li class="chapter" data-level="6.4.2" data-path="describing-your-data.html"><a href="describing-your-data.html#headtail"><i class="fa fa-check"></i><b>6.4.2</b> <code>head()</code>/<code>tail()</code></a></li>
<li class="chapter" data-level="6.4.3" data-path="describing-your-data.html"><a href="describing-your-data.html#dplyrslice_"><i class="fa fa-check"></i><b>6.4.3</b> <code>dplyr::slice_*()</code></a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="describing-your-data.html"><a href="describing-your-data.html#generating-data-summaries"><i class="fa fa-check"></i><b>6.5</b> Generating data summaries</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="describing-your-data.html"><a href="describing-your-data.html#summary-1"><i class="fa fa-check"></i><b>6.5.1</b> <code>summary()</code></a></li>
<li class="chapter" data-level="6.5.2" data-path="describing-your-data.html"><a href="describing-your-data.html#skimrskim"><i class="fa fa-check"></i><b>6.5.2</b> <code>skimr::skim()</code></a></li>
<li class="chapter" data-level="6.5.3" data-path="describing-your-data.html"><a href="describing-your-data.html#group_by-and-summarizecount"><i class="fa fa-check"></i><b>6.5.3</b> <code>group_by()</code> and <code>summarize()</code>/<code>count()</code></a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="describing-your-data.html"><a href="describing-your-data.html#statistics-review"><i class="fa fa-check"></i><b>6.6</b> Statistics review</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="describing-your-data.html"><a href="describing-your-data.html#measures-of-central-tendency"><i class="fa fa-check"></i><b>6.6.1</b> Measures of central tendency</a></li>
<li class="chapter" data-level="6.6.2" data-path="describing-your-data.html"><a href="describing-your-data.html#variation"><i class="fa fa-check"></i><b>6.6.2</b> Variation</a></li>
<li class="chapter" data-level="6.6.3" data-path="describing-your-data.html"><a href="describing-your-data.html#linear-association"><i class="fa fa-check"></i><b>6.6.3</b> Linear Association</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="describing-your-data.html"><a href="describing-your-data.html#references-3"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="advancing-our-wrangling.html"><a href="advancing-our-wrangling.html"><i class="fa fa-check"></i><b>7</b> Advancing our wrangling</a>
<ul>
<li class="chapter" data-level="7.1" data-path="advancing-our-wrangling.html"><a href="advancing-our-wrangling.html#todays-data"><i class="fa fa-check"></i><b>7.1</b> Today’s data</a></li>
<li class="chapter" data-level="7.2" data-path="advancing-our-wrangling.html"><a href="advancing-our-wrangling.html#review-of-control-flow"><i class="fa fa-check"></i><b>7.2</b> Review of control flow</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="advancing-our-wrangling.html"><a href="advancing-our-wrangling.html#loops-1"><i class="fa fa-check"></i><b>7.2.1</b> Loops</a></li>
<li class="chapter" data-level="7.2.2" data-path="advancing-our-wrangling.html"><a href="advancing-our-wrangling.html#conditionals"><i class="fa fa-check"></i><b>7.2.2</b> Conditionals</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="advancing-our-wrangling.html"><a href="advancing-our-wrangling.html#using-vectorization-in-r"><i class="fa fa-check"></i><b>7.3</b> Using vectorization in R</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="advancing-our-wrangling.html"><a href="advancing-our-wrangling.html#tidyverse-approaches-map-family"><i class="fa fa-check"></i><b>7.3.1</b> <code>tidyverse</code> approaches: <code>map()</code> family</a></li>
<li class="chapter" data-level="7.3.2" data-path="advancing-our-wrangling.html"><a href="advancing-our-wrangling.html#base-r-approaches-apply-family"><i class="fa fa-check"></i><b>7.3.2</b> Base R approaches: <code>apply()</code> family</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="advancing-our-wrangling.html"><a href="advancing-our-wrangling.html#relational-data"><i class="fa fa-check"></i><b>7.4</b> Relational data</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="advancing-our-wrangling.html"><a href="advancing-our-wrangling.html#bind-functions"><i class="fa fa-check"></i><b>7.4.1</b> <code>*bind()</code> functions</a></li>
<li class="chapter" data-level="7.4.2" data-path="advancing-our-wrangling.html"><a href="advancing-our-wrangling.html#join-functions"><i class="fa fa-check"></i><b>7.4.2</b> <code>*_join()</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="advancing-our-wrangling.html"><a href="advancing-our-wrangling.html#writing-readable-and-reproducible-scripts"><i class="fa fa-check"></i><b>7.5</b> Writing readable and reproducible scripts</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="advancing-our-wrangling.html"><a href="advancing-our-wrangling.html#comments"><i class="fa fa-check"></i><b>7.5.1</b> Comments</a></li>
<li class="chapter" data-level="7.5.2" data-path="advancing-our-wrangling.html"><a href="advancing-our-wrangling.html#whitespace-1"><i class="fa fa-check"></i><b>7.5.2</b> Whitespace</a></li>
<li class="chapter" data-level="7.5.3" data-path="advancing-our-wrangling.html"><a href="advancing-our-wrangling.html#use-informative-variable-names"><i class="fa fa-check"></i><b>7.5.3</b> Use informative variable names</a></li>
<li class="chapter" data-level="7.5.4" data-path="advancing-our-wrangling.html"><a href="advancing-our-wrangling.html#running-from-scratch"><i class="fa fa-check"></i><b>7.5.4</b> Running from scratch</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="advancing-our-wrangling.html"><a href="advancing-our-wrangling.html#references-4"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="inference-from-data.html"><a href="inference-from-data.html"><i class="fa fa-check"></i><b>8</b> Inference from data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="inference-from-data.html"><a href="inference-from-data.html#motivation-inference-from-experiments"><i class="fa fa-check"></i><b>8.1</b> Motivation: inference from experiments</a></li>
<li class="chapter" data-level="8.2" data-path="inference-from-data.html"><a href="inference-from-data.html#a-resampling-approach-to-statistics"><i class="fa fa-check"></i><b>8.2</b> “A resampling approach” to statistics</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="inference-from-data.html"><a href="inference-from-data.html#confidence-intervals-around-group-means-the-bootstrap"><i class="fa fa-check"></i><b>8.2.1</b> Confidence intervals around group means (the “bootstrap”)</a></li>
<li class="chapter" data-level="8.2.2" data-path="inference-from-data.html"><a href="inference-from-data.html#is-that-difference-important-permutation-tests"><i class="fa fa-check"></i><b>8.2.2</b> Is that difference important (permutation tests)?</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="inference-from-data.html"><a href="inference-from-data.html#what-do-we-know-about-statistics"><i class="fa fa-check"></i><b>8.3</b> What do we know about statistics?</a></li>
<li class="chapter" data-level="" data-path="inference-from-data.html"><a href="inference-from-data.html#references-5"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="the-linear-model---regression-and-anova.html"><a href="the-linear-model---regression-and-anova.html"><i class="fa fa-check"></i><b>9</b> The linear model - regression and ANOVA</a>
<ul>
<li class="chapter" data-level="9.1" data-path="the-linear-model---regression-and-anova.html"><a href="the-linear-model---regression-and-anova.html#dataset-example-for-today"><i class="fa fa-check"></i><b>9.1</b> Dataset example for today</a></li>
<li class="chapter" data-level="9.2" data-path="the-linear-model---regression-and-anova.html"><a href="the-linear-model---regression-and-anova.html#review-of-measurement-levels"><i class="fa fa-check"></i><b>9.2</b> Review of measurement levels</a></li>
<li class="chapter" data-level="9.3" data-path="the-linear-model---regression-and-anova.html"><a href="the-linear-model---regression-and-anova.html#linear-regression"><i class="fa fa-check"></i><b>9.3</b> Linear regression</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="the-linear-model---regression-and-anova.html"><a href="the-linear-model---regression-and-anova.html#bivariate-2-variable-relationships-imply-a-third-variable"><i class="fa fa-check"></i><b>9.3.1</b> Bivariate (2-variable) relationships imply a third variable</a></li>
<li class="chapter" data-level="9.3.2" data-path="the-linear-model---regression-and-anova.html"><a href="the-linear-model---regression-and-anova.html#simple-linear-regression"><i class="fa fa-check"></i><b>9.3.2</b> Simple linear regression</a></li>
<li class="chapter" data-level="9.3.3" data-path="the-linear-model---regression-and-anova.html"><a href="the-linear-model---regression-and-anova.html#checking-your-model"><i class="fa fa-check"></i><b>9.3.3</b> Checking your model</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="the-linear-model---regression-and-anova.html"><a href="the-linear-model---regression-and-anova.html#a-note-about-causality"><i class="fa fa-check"></i><b>9.4</b> A note about causality</a></li>
<li class="chapter" data-level="9.5" data-path="the-linear-model---regression-and-anova.html"><a href="the-linear-model---regression-and-anova.html#a-coding-digression-factor"><i class="fa fa-check"></i><b>9.5</b> A coding digression: <code>factor</code></a></li>
<li class="chapter" data-level="9.6" data-path="the-linear-model---regression-and-anova.html"><a href="the-linear-model---regression-and-anova.html#analysis-of-variance-anova"><i class="fa fa-check"></i><b>9.6</b> Analysis of variance (ANOVA)</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="the-linear-model---regression-and-anova.html"><a href="the-linear-model---regression-and-anova.html#one-way-anova"><i class="fa fa-check"></i><b>9.6.1</b> One-way ANOVA</a></li>
<li class="chapter" data-level="9.6.2" data-path="the-linear-model---regression-and-anova.html"><a href="the-linear-model---regression-and-anova.html#posthoc-testing"><i class="fa fa-check"></i><b>9.6.2</b> Posthoc testing</a></li>
<li class="chapter" data-level="9.6.3" data-path="the-linear-model---regression-and-anova.html"><a href="the-linear-model---regression-and-anova.html#plotting-anova-results"><i class="fa fa-check"></i><b>9.6.3</b> Plotting ANOVA results</a></li>
<li class="chapter" data-level="9.6.4" data-path="the-linear-model---regression-and-anova.html"><a href="the-linear-model---regression-and-anova.html#resampling-approaches-to-anova"><i class="fa fa-check"></i><b>9.6.4</b> Resampling approaches to ANOVA</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="the-linear-model---regression-and-anova.html"><a href="the-linear-model---regression-and-anova.html#incorporating-multiple-predictors"><i class="fa fa-check"></i><b>9.7</b> Incorporating multiple predictors</a></li>
<li class="chapter" data-level="" data-path="the-linear-model---regression-and-anova.html"><a href="the-linear-model---regression-and-anova.html#references-6"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="dealing-with-multiple-factors.html"><a href="dealing-with-multiple-factors.html"><i class="fa fa-check"></i><b>10</b> Dealing with multiple factors</a>
<ul>
<li class="chapter" data-level="10.1" data-path="dealing-with-multiple-factors.html"><a href="dealing-with-multiple-factors.html#introduction"><i class="fa fa-check"></i><b>10.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="dealing-with-multiple-factors.html"><a href="dealing-with-multiple-factors.html#data-example"><i class="fa fa-check"></i><b>10.1.1</b> Data example</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="dealing-with-multiple-factors.html"><a href="dealing-with-multiple-factors.html#multi-way-anova"><i class="fa fa-check"></i><b>10.2</b> Multi-way ANOVA</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="dealing-with-multiple-factors.html"><a href="dealing-with-multiple-factors.html#stepwise-model-fitting"><i class="fa fa-check"></i><b>10.2.1</b> Stepwise model fitting</a></li>
<li class="chapter" data-level="10.2.2" data-path="dealing-with-multiple-factors.html"><a href="dealing-with-multiple-factors.html#plotting-interaction-effects"><i class="fa fa-check"></i><b>10.2.2</b> Plotting interaction effects</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="dealing-with-multiple-factors.html"><a href="dealing-with-multiple-factors.html#multiple-regression"><i class="fa fa-check"></i><b>10.3</b> Multiple regression</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="dealing-with-multiple-factors.html"><a href="dealing-with-multiple-factors.html#fitting-a-multiple-regression-to-our-model"><i class="fa fa-check"></i><b>10.3.1</b> Fitting a multiple regression to our model</a></li>
<li class="chapter" data-level="10.3.2" data-path="dealing-with-multiple-factors.html"><a href="dealing-with-multiple-factors.html#a-second-example-of-stepwise-model-fitting"><i class="fa fa-check"></i><b>10.3.2</b> A second example of stepwise model fitting</a></li>
<li class="chapter" data-level="10.3.3" data-path="dealing-with-multiple-factors.html"><a href="dealing-with-multiple-factors.html#combining-continuous-and-categorical-data"><i class="fa fa-check"></i><b>10.3.3</b> Combining continuous and categorical data</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="dealing-with-multiple-factors.html"><a href="dealing-with-multiple-factors.html#some-notes-of-caution-on-model-selection"><i class="fa fa-check"></i><b>10.4</b> Some notes of caution on model selection</a></li>
<li class="chapter" data-level="10.5" data-path="dealing-with-multiple-factors.html"><a href="dealing-with-multiple-factors.html#tree"><i class="fa fa-check"></i><b>10.5</b> Categorization and Regression Trees (CART): A data-based approach</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="dealing-with-multiple-factors.html"><a href="dealing-with-multiple-factors.html#regression-trees"><i class="fa fa-check"></i><b>10.5.1</b> Regression trees</a></li>
<li class="chapter" data-level="10.5.2" data-path="dealing-with-multiple-factors.html"><a href="dealing-with-multiple-factors.html#categorization-trees"><i class="fa fa-check"></i><b>10.5.2</b> Categorization trees</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="dealing-with-multiple-factors.html"><a href="dealing-with-multiple-factors.html#wrap-up"><i class="fa fa-check"></i><b>10.6</b> Wrap-up</a></li>
<li class="chapter" data-level="" data-path="dealing-with-multiple-factors.html"><a href="dealing-with-multiple-factors.html#references-7"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="data-literacy-and-an-applied-example-of-data-science.html"><a href="data-literacy-and-an-applied-example-of-data-science.html"><i class="fa fa-check"></i><b>11</b> Data literacy and an applied example of data science</a>
<ul>
<li class="chapter" data-level="11.1" data-path="data-literacy-and-an-applied-example-of-data-science.html"><a href="data-literacy-and-an-applied-example-of-data-science.html#text-mining-and-processing"><i class="fa fa-check"></i><b>11.1</b> Text mining and processing</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="data-literacy-and-an-applied-example-of-data-science.html"><a href="data-literacy-and-an-applied-example-of-data-science.html#introduction-the-data-source"><i class="fa fa-check"></i><b>11.1.1</b> Introduction: the data source</a></li>
<li class="chapter" data-level="11.1.2" data-path="data-literacy-and-an-applied-example-of-data-science.html"><a href="data-literacy-and-an-applied-example-of-data-science.html#getting-permission"><i class="fa fa-check"></i><b>11.1.2</b> Getting permission</a></li>
<li class="chapter" data-level="11.1.3" data-path="data-literacy-and-an-applied-example-of-data-science.html"><a href="data-literacy-and-an-applied-example-of-data-science.html#a-website-is-just-mark-up-language"><i class="fa fa-check"></i><b>11.1.3</b> A website is just (mark up) language</a></li>
<li class="chapter" data-level="11.1.4" data-path="data-literacy-and-an-applied-example-of-data-science.html"><a href="data-literacy-and-an-applied-example-of-data-science.html#looking-at-some-actual-data"><i class="fa fa-check"></i><b>11.1.4</b> Looking at some actual data</a></li>
<li class="chapter" data-level="11.1.5" data-path="data-literacy-and-an-applied-example-of-data-science.html"><a href="data-literacy-and-an-applied-example-of-data-science.html#using-basic-text-analysis-to-find-descriptions"><i class="fa fa-check"></i><b>11.1.5</b> Using basic text analysis to find descriptions</a></li>
<li class="chapter" data-level="11.1.6" data-path="data-literacy-and-an-applied-example-of-data-science.html"><a href="data-literacy-and-an-applied-example-of-data-science.html#quantifying-text-data"><i class="fa fa-check"></i><b>11.1.6</b> Quantifying text data</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="data-literacy-and-an-applied-example-of-data-science.html"><a href="data-literacy-and-an-applied-example-of-data-science.html#data-literacy"><i class="fa fa-check"></i><b>11.2</b> Data literacy</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="data-literacy-and-an-applied-example-of-data-science.html"><a href="data-literacy-and-an-applied-example-of-data-science.html#sources"><i class="fa fa-check"></i><b>11.2.1</b> Introduction</a></li>
<li class="chapter" data-level="11.2.2" data-path="data-literacy-and-an-applied-example-of-data-science.html"><a href="data-literacy-and-an-applied-example-of-data-science.html#the-replicability-crisis"><i class="fa fa-check"></i><b>11.2.2</b> The replicability crisis</a></li>
<li class="chapter" data-level="11.2.3" data-path="data-literacy-and-an-applied-example-of-data-science.html"><a href="data-literacy-and-an-applied-example-of-data-science.html#null"><i class="fa fa-check"></i><b>11.2.3</b> Some quick thoughts on (Null) Hypothesis Testing (NHST)</a></li>
<li class="chapter" data-level="11.2.4" data-path="data-literacy-and-an-applied-example-of-data-science.html"><a href="data-literacy-and-an-applied-example-of-data-science.html#selection"><i class="fa fa-check"></i><b>11.2.4</b> Observer (selection) bias</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="data-literacy-and-an-applied-example-of-data-science.html"><a href="data-literacy-and-an-applied-example-of-data-science.html#counting"><i class="fa fa-check"></i><b>11.3</b> Counting</a></li>
<li class="chapter" data-level="" data-path="data-literacy-and-an-applied-example-of-data-science.html"><a href="data-literacy-and-an-applied-example-of-data-science.html#references-8"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">FST 5984: SS Data Analytics for Food and Ag Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="control-flow-and-functions" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Control flow and functions<a href="control-flow-and-functions.html#control-flow-and-functions" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<hr />
<p>The real power of a coding approach to data analysis, like that we’re learning with R, lies in the flexibility and customization that coding offers. Unlike a menu-based (“point-and-click”) approach, in R (or in Python if you want to learn another language), you can:</p>
<ul>
<li>Write custom analysis functions that act exactly like you want</li>
<li>Run simulations based on your data</li>
<li>Write scripts to do tedious repetitions, like reading data files from a directory and running a set of analyses</li>
</ul>
<p>I like to call this a <strong>programmatic</strong> approach to data analysis, as in: you are writing a <strong>program</strong> that will execute itself and do the things you want it to do. This is the real power of a data-science / coding / R approach to our analyses. By taking this programmatic viewpoint, we will be able to move away from having to memorize menu commands and make repetitive selections.</p>
<p>The downside, of course, is that we have to learn how R (and, more broadly, computers) think. This is what we’ve been learning. We’ve learned about:</p>
<ul>
<li>Data types</li>
<li>Storing variables</li>
<li>Writing code and <code>#comments</code></li>
<li>Functional syntax</li>
</ul>
<p>We’ve learned, in particular, that computers will do things that are really hard for us, but that we have to learn to put things into the exact terms that they will understand. I think the first couple weeks of using R feel extremely difficult, and the payoff seems far away. So the goal of class today is to motivate this a bit more. We will be discussing <strong>simulation and sampling</strong> in particular to talk about simple data-generation tasks that are very difficult to do in Excel or JMP. But these tools in particular are even more powerful when we can integrate them into programmatic approaches, so today we’re going to spend the bulk of our time talking about <strong>logic</strong> and about <strong>functions</strong>. These are the building blocks of the programmatic approach, and once you start to learn a bit more about them, the way that R works will become increasingly clear. Then, we will look at some of the cool, simple simulations we can build with these tools.</p>
<div class="figure">
<img src="https://imgs.xkcd.com/comics/good_code.png" alt="" />
<p class="caption">This is where most of us live in coding expertise, <a href="https://xkcd.com/844/">from XKCD</a>.</p>
</div>
<div id="functions" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Functions<a href="control-flow-and-functions.html#functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<hr />
<p>The first piece of the puzzle that will help us make R useful for research is formalizing the idea of a <strong>function</strong>. We’ve been using functions since the very first day of class: everything from <code>install.packages()</code> to <code>print()</code> to <code>c()</code> is a function in R. But just because we’ve been using these doesn’t given us any actual idea of what a function <em>is</em>.</p>
<p>It turns out that R has a very pragmatic definition of functions and that, in fact, we can even write our own very easily, which will be a difficult but key step in making our coding effective for our specialized research needs.</p>
<div id="introduction---quasi-mathematical-definition" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Introduction - quasi-mathematical definition<a href="control-flow-and-functions.html#introduction---quasi-mathematical-definition" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We all learned about functions (I think probably in precalculus?) with the idea of <span class="math inline">\(f(x)\)</span>. The “<span class="math inline">\(f\)</span>” literally is shorthand <em>for</em> “function”. In a mathematical sense, functions take input(s)–like <span class="math inline">\(x\)</span>–and map them to an output–often called <span class="math inline">\(y\)</span> in our basic math classes–by applying some transformation that is defined <em>in</em> <span class="math inline">\(f\)</span>.</p>
<div class="figure">
<img src="Images/Week%203/Function_machine2.svg.png" alt="" />
<p class="caption">Schematic function diagram <a href="https://en.wikipedia.org/wiki/Function_(mathematics)#/media/File:Function_machine2.svg">from Wikipedia</a>.</p>
</div>
<p>While in math we spent a lot of time learning about how functions should operate (for example, each x should only map to one y, although the reverse does not need to be true, e.g. <span class="math inline">\(f(x) = x^2\)</span>), in coding we can consider functions more as “black box machines”: we do not need to know exactly how they work internally–most of the time–as long as we understand what inputs (<span class="math inline">\(x\)</span>s) they need, and what outputs (<span class="math inline">\(y\)</span>s) they give us.</p>
</div>
<div id="everything-weve-been-using-in-r-is-a-function" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Everything we’ve been using in R is a function<a href="control-flow-and-functions.html#everything-weve-been-using-in-r-is-a-function" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>One of the nice things about R is that (most of) it is written <em>in R</em>. That means that most of the R functions are written with R syntax, and we can learn to understand what they’re doing. The very basic functions are not (they are written in a crazy mix of C++ and old languages like Fortran, I believe), but for the most part we can look at how functions work by just printing them out.</p>
<p>Let’s look at the function for calculating the standard deviation of a set of numbers, <code>sd()</code>.</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="control-flow-and-functions.html#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)) <span class="co"># this will give the standard deviation of these 6 numbers</span></span></code></pre></div>
<pre><code>## [1] 1.870829</code></pre>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="control-flow-and-functions.html#cb236-1" aria-hidden="true" tabindex="-1"></a>sd <span class="co"># Note that by not including the &#39;()&#39; I am asking for the OBJECT &#39;sd&#39;, not the function sd()</span></span></code></pre></div>
<pre><code>## function (x, na.rm = FALSE) 
## sqrt(var(if (is.vector(x) || is.factor(x)) x else as.double(x), 
##     na.rm = na.rm))
## &lt;bytecode: 0x7ff0de456a28&gt;
## &lt;environment: namespace:stats&gt;</code></pre>
<p>While that’s not pretty, we can actually learn a lot from it–but don’t worry, I’m going to spare you for now. The main point here is that you can see some elements you’re probably starting to recognize: other R functions, <code>if()</code> and <code>else</code> statements… this is something we can examine.</p>
<p>To return to our quasimathematical definition, we <em>also</em> can see that <code>sd()</code> takes some inputs and gives us some outputs.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="control-flow-and-functions.html#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="control-flow-and-functions.html#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span></code></pre></div>
<pre><code>## [1] 0.7071068</code></pre>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="control-flow-and-functions.html#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(<span class="fu">c</span>(<span class="st">&quot;dog&quot;</span>, <span class="st">&quot;cat&quot;</span>))</span></code></pre></div>
<pre><code>## Warning in var(if (is.vector(x) || is.factor(x)) x else as.double(x), na.rm =
## na.rm): NAs introduced by coercion</code></pre>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="control-flow-and-functions.html#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">NA</span>))</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="control-flow-and-functions.html#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">NA</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>It seems like <code>sd()</code> doesn’t like single numbers (“scalars”, recall), because <code>sd(1)</code> returns <code>NA</code>. We can learn why this is by thinking about the definition of standard deviation. More predictably, it also doesn’t like character vectors. It also doesn’t know how to deal with the special value <code>NA</code>, but we can provide it with an <strong>argument</strong> <code>na.rm = TRUE</code> that tells it to <strong>r</strong>e<strong>m</strong>ove <code>NA</code>s in order to do it’s calculations.</p>
<p>So it seems like <code>sd()</code>, as a function, <em>takes</em> (as <span class="math inline">\(x\)</span>) a vector numbers of length &gt; 1, and returns a numeric vector of length = 1.</p>
</div>
<div id="back-to-reading-the-function-structure" class="section level3 hasAnchor" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Back to <code>?</code>: Reading the function structure<a href="control-flow-and-functions.html#back-to-reading-the-function-structure" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This was a lot of work to do to dissect a function so simple you can run it on a scientific calculator. A much better option is to use our old friend <code>?</code> to investigate how functions work–in particular, their <strong>arguments</strong> and the <strong>values</strong> they return.</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="control-flow-and-functions.html#cb249-1" aria-hidden="true" tabindex="-1"></a>?sd <span class="co"># run this yourself</span></span></code></pre></div>
<p>You’ll notice that the typical help page has sections like “Usage”, “Arguments”, and “Details”. Let’s examine these:</p>
<ul>
<li>Usage - this section gives an example of the function with its <strong>arguments</strong>. It also displays the <strong>default values</strong> for the arguments.</li>
<li>Arguments - this gives details on <strong>how</strong> the arguments the function accepts work. In the case of <code>sd()</code>, there are two arguments. <code>x</code> is the data you want the standard deviation of, and <code>na.rm</code> asks whether it should remove <code>NA</code> values. Note that the <strong>default</strong> for <code>na.rm = FALSE</code>. This means you don’t have to set it explicitly (the function already has a value for it), but if you don’t set it <em>explicitly</em> you will be accepting that default option.</li>
<li>Details - this section gives notes about the function and how it works. In the case of some functions, “Details” also explains what <strong>values</strong> the function returns.</li>
</ul>
<p>Some optional elements on these pages which are helpful if they are present are:</p>
<ul>
<li>Values - this explicitly tells you what you can expect the function to return. If <code>sd()</code> had this, it would note that it returns a numeric vector of length 1 with the calculated standard deviation.</li>
<li>Examples - these are executable R code that give examples of how the function works. These can be very helpful for you to copy and paste and run yourself to get an idea of what is happening in more complex functions.</li>
</ul>
</div>
<div id="function-arguments" class="section level3 hasAnchor" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> Function arguments<a href="control-flow-and-functions.html#function-arguments" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The topic of function arguments deserves its own section because of how R tries to be helpful. Let’s look at a function that takes a few arguments that we’ve already seen: <code>rnorm()</code>. Try running <code>?rnorm</code> to get an idea of how it works. Note that the help page brings up a set of related functions as well.</p>
<p><code>rnorm()</code> has 3 arguments - <code>n</code>, the number of samples you want, <code>mean</code>, the mean of the normal distribution you’re sampling from, and <code>sd</code>, the standard deviation of the normal distribution you’re sampling from. You’ll also notice that both <code>mean</code> and <code>sd</code> have default values, so if you don’t specify them it will give you a draw from a normal distribution with <code>mean = 0</code> and <code>sd = 1</code>. So we can run it as follows:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="control-flow-and-functions.html#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>) <span class="co"># for reproducibility</span></span>
<span id="cb250-2"><a href="control-flow-and-functions.html#cb250-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">mean =</span> <span class="dv">5</span>, <span class="at">sd =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 3.318573 4.309468 9.676125 5.211525 5.387863</code></pre>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="control-flow-and-functions.html#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>) <span class="co"># let&#39;s do that again</span></span>
<span id="cb252-2"><a href="control-flow-and-functions.html#cb252-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 3.318573 4.309468 9.676125 5.211525 5.387863</code></pre>
<p>What just happened? How does R know that the first <code>5</code> in <code>rnorm(5, 5, 3)</code> is the number of samples, and the second is the mean? R uses something called “positional argument matching”, in which it will take arguments to a function and just match them up <strong>in the order the function is written</strong>. This is generally useful for writing quick code, but I encourage you to get in the habit of explicitly naming arguments. This both makes your code clearer to yourself and to others, but avoids bad errors when you forget to specify an argument that has a default, for example:</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="control-flow-and-functions.html#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">5</span>, <span class="dv">3</span>) <span class="co"># What do you think is happening here?  Is this good code?</span></span></code></pre></div>
<pre><code>## [1] 4.715065 3.460916 1.734939 2.313147 2.554338</code></pre>
<p><strong>NB:</strong> RStudio makes it easy to both get help and to write good code using the <a href="https://support.rstudio.com/hc/en-us/articles/205273297-Code-Completion-in-the-RStudio-IDE">“code autocomplete”</a> function. Let’s all make sure we’ve already got this turned on:</p>
<p><img src="Images/Week%203/turn%20on%20code%20autocompletion.png" alt="The RStudio preferences for turning on autocompletion" />
Now, when you start typing a function, you can</p>
<ol style="list-style-type: decimal">
<li>Hit tab to complete the function name</li>
<li>Once you’ve opened the parentheses for the function, hit tab to see the arguments from the help file. Hit tab a second time to autofill the argument with an <code>=</code> to help you type!</li>
</ol>
</div>
<div id="writing-your-own-functions" class="section level3 hasAnchor" number="3.1.5">
<h3><span class="header-section-number">3.1.5</span> Writing your own functions<a href="control-flow-and-functions.html#writing-your-own-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Largely, R packages are assemblies of useful functions. But sometimes you will need to write your own. Hadley <span class="citation">Wickham and Grolemund (<a href="#ref-wickham2017" role="doc-biblioref">2017</a>)</span> <a href="https://r4ds.had.co.nz/functions.html">writes that functions should be used whenever you find yourself frequently cutting and pasting code</a>, as well as to make your code more readable by giving clear, evocative names to the things you’re actually doing. This can go right along with our pseudocoding tricks–you make your functions read more like English and it becomes much clearer what you’re doing.</p>
<p>Funny enough, in R you write a function using the–wait for it–<code>function()</code> function. Now that’s recursion! Specifically, you choose a name for your function, and then create a new object of <em>class</em> function by assigning it to your new object name using <code>&lt;-</code>. So the whole process looks like this:</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="control-flow-and-functions.html#cb256-1" aria-hidden="true" tabindex="-1"></a>make_it_awesome <span class="ot">&lt;-</span> <span class="cf">function</span>(a_thing) <span class="fu">paste</span>(a_thing, <span class="st">&quot;is awesome!&quot;</span>)</span>
<span id="cb256-2"><a href="control-flow-and-functions.html#cb256-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make_it_awesome</span>(<span class="st">&quot;ice cream&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ice cream is awesome!&quot;</code></pre>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="control-flow-and-functions.html#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_it_awesome</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;3 is awesome!&quot;</code></pre>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="control-flow-and-functions.html#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_it_awesome</span>(<span class="fu">c</span>(<span class="st">&quot;dog&quot;</span>, <span class="st">&quot;cat&quot;</span>)) <span class="co"># hmm</span></span></code></pre></div>
<pre><code>## [1] &quot;dog is awesome!&quot; &quot;cat is awesome!&quot;</code></pre>
<p>Just like <code>for()</code> and <code>if()</code> statements, <code>function()</code> statements that are more than 1 line need to be enclosed in <code>{}</code> braces in order to tell R that the whole function needs to have all of those lines. In fact, you can do this with even 1-line functions:</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="control-flow-and-functions.html#cb262-1" aria-hidden="true" tabindex="-1"></a>make_it_awesome <span class="ot">&lt;-</span> <span class="cf">function</span>(a_thing){</span>
<span id="cb262-2"><a href="control-flow-and-functions.html#cb262-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(a_thing, <span class="st">&quot;is awesome!&quot;</span>)</span>
<span id="cb262-3"><a href="control-flow-and-functions.html#cb262-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb262-4"><a href="control-flow-and-functions.html#cb262-4" aria-hidden="true" tabindex="-1"></a><span class="fu">make_it_awesome</span>(<span class="st">&quot;FST 5984&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;FST 5984 is awesome!&quot;</code></pre>
<p>To be more explicit, a function needs to have 3 elements:</p>
<ol style="list-style-type: decimal">
<li>A name</li>
<li>The <code>function(&lt;argument 1&gt;, &lt;argument 2&gt;, ...)</code> structure</li>
<li>One or more lines that execute the function inside the <code>{}</code></li>
</ol>
<p>Let’s recall that, to normalize a set of observations, we first find the mean and sd of that set, then subtract the mean and divide by the sd for each number. This would be tedious and error prone if we did it one at a time (and maybe impossible if our set was large). Let’s do this with some values from the <code>mtcars</code> dataset for fun:</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="control-flow-and-functions.html#cb264-1" aria-hidden="true" tabindex="-1"></a>mtcars<span class="sc">$</span>wt <span class="co"># this is the weight of each car in 1000s of lbs.  What does &quot;$&quot; do?</span></span></code></pre></div>
<pre><code>##  [1] 2.620 2.875 2.320 3.215 3.440 3.460 3.570 3.190 3.150 3.440 3.440 4.070
## [13] 3.730 3.780 5.250 5.424 5.345 2.200 1.615 1.835 2.465 3.520 3.435 3.840
## [25] 3.845 1.935 2.140 1.513 3.170 2.770 3.570 2.780</code></pre>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="control-flow-and-functions.html#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(mtcars<span class="sc">$</span>wt)</span></code></pre></div>
<pre><code>## [1] 3.21725</code></pre>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="control-flow-and-functions.html#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(mtcars<span class="sc">$</span>wt)</span></code></pre></div>
<pre><code>## [1] 0.9784574</code></pre>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="control-flow-and-functions.html#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Now for the first car:</span></span>
<span id="cb270-2"><a href="control-flow-and-functions.html#cb270-2" aria-hidden="true" tabindex="-1"></a>(mtcars<span class="sc">$</span>wt[<span class="dv">1</span>] <span class="sc">-</span> <span class="fu">mean</span>(mtcars<span class="sc">$</span>wt)) <span class="sc">/</span> <span class="fu">sd</span>(mtcars<span class="sc">$</span>wt)</span></code></pre></div>
<pre><code>## [1] -0.6103996</code></pre>
<p>We could write a <code>for()</code> loop to step through every row and do this, but that seems like a lot of work. What if we write a function that takes any numeric vector and normalizes it?</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="control-flow-and-functions.html#cb272-1" aria-hidden="true" tabindex="-1"></a>make_it_normalized <span class="ot">&lt;-</span> <span class="cf">function</span>(our_data){</span>
<span id="cb272-2"><a href="control-flow-and-functions.html#cb272-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb272-3"><a href="control-flow-and-functions.html#cb272-3" aria-hidden="true" tabindex="-1"></a>  our_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(our_data) </span>
<span id="cb272-4"><a href="control-flow-and-functions.html#cb272-4" aria-hidden="true" tabindex="-1"></a>  our_sd <span class="ot">&lt;-</span> <span class="fu">sd</span>(our_data)</span>
<span id="cb272-5"><a href="control-flow-and-functions.html#cb272-5" aria-hidden="true" tabindex="-1"></a>  (our_data <span class="sc">-</span> our_mean) <span class="sc">/</span> our_sd <span class="co"># remember that R will do vector math with scalars, so this &quot;recycles&quot; the scalars to the length of our_data</span></span>
<span id="cb272-6"><a href="control-flow-and-functions.html#cb272-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb272-7"><a href="control-flow-and-functions.html#cb272-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb272-8"><a href="control-flow-and-functions.html#cb272-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make_it_normalized</span>(mtcars<span class="sc">$</span>wt) <span class="co"># well that&#39;s pretty cool</span></span></code></pre></div>
<pre><code>##  [1] -0.610399567 -0.349785269 -0.917004624 -0.002299538  0.227654255
##  [6]  0.248094592  0.360516446 -0.027849959 -0.068730634  0.227654255
## [11]  0.227654255  0.871524874  0.524039143  0.575139986  2.077504765
## [16]  2.255335698  2.174596366 -1.039646647 -1.637526508 -1.412682800
## [21] -0.768812180  0.309415603  0.222544170  0.636460997  0.641571082
## [26] -1.310481114 -1.100967659 -1.741772228 -0.048290296 -0.457097039
## [31]  0.360516446 -0.446876870</code></pre>
<p>What’s even cooler is that this function can now be used anywhere else we want. Another famous dataset is the <code>iris</code> dataset, which observes several physical characteristics on a set of Iris flowers:</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="control-flow-and-functions.html#cb274-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(iris)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  5 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="control-flow-and-functions.html#cb276-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_it_normalized</span>(iris<span class="sc">$</span>Sepal.Width) <span class="co"># let&#39;s normalize those petal widths!</span></span></code></pre></div>
<pre><code>##   [1]  1.01560199 -0.13153881  0.32731751  0.09788935  1.24503015  1.93331463
##   [7]  0.78617383  0.78617383 -0.36096697  0.09788935  1.47445831  0.78617383
##  [13] -0.13153881 -0.13153881  2.16274279  3.08045544  1.93331463  1.01560199
##  [19]  1.70388647  1.70388647  0.78617383  1.47445831  1.24503015  0.55674567
##  [25]  0.78617383 -0.13153881  0.78617383  1.01560199  0.78617383  0.32731751
##  [31]  0.09788935  0.78617383  2.39217095  2.62159911  0.09788935  0.32731751
##  [37]  1.01560199  1.24503015 -0.13153881  0.78617383  1.01560199 -1.73753594
##  [43]  0.32731751  1.01560199  1.70388647 -0.13153881  1.70388647  0.32731751
##  [49]  1.47445831  0.55674567  0.32731751  0.32731751  0.09788935 -1.73753594
##  [55] -0.59039513 -0.59039513  0.55674567 -1.50810778 -0.36096697 -0.81982329
##  [61] -2.42582042 -0.13153881 -1.96696410 -0.36096697 -0.36096697  0.09788935
##  [67] -0.13153881 -0.81982329 -1.96696410 -1.27867961  0.32731751 -0.59039513
##  [73] -1.27867961 -0.59039513 -0.36096697 -0.13153881 -0.59039513 -0.13153881
##  [79] -0.36096697 -1.04925145 -1.50810778 -1.50810778 -0.81982329 -0.81982329
##  [85] -0.13153881  0.78617383  0.09788935 -1.73753594 -0.13153881 -1.27867961
##  [91] -1.04925145 -0.13153881 -1.04925145 -1.73753594 -0.81982329 -0.13153881
##  [97] -0.36096697 -0.36096697 -1.27867961 -0.59039513  0.55674567 -0.81982329
## [103] -0.13153881 -0.36096697 -0.13153881 -0.13153881 -1.27867961 -0.36096697
## [109] -1.27867961  1.24503015  0.32731751 -0.81982329 -0.13153881 -1.27867961
## [115] -0.59039513  0.32731751 -0.13153881  1.70388647 -1.04925145 -1.96696410
## [121]  0.32731751 -0.59039513 -0.59039513 -0.81982329  0.55674567  0.32731751
## [127] -0.59039513 -0.13153881 -0.59039513 -0.13153881 -0.59039513  1.70388647
## [133] -0.59039513 -0.59039513 -1.04925145 -0.13153881  0.78617383  0.09788935
## [139] -0.13153881  0.09788935  0.09788935  0.09788935 -0.81982329  0.32731751
## [145]  0.55674567 -0.13153881 -1.27867961 -0.13153881  0.78617383 -0.13153881</code></pre>
<p>Even more importantly, our function is just a bit of script we wrote–we can always go back and see what’s in it, or even edit if we need to:</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="control-flow-and-functions.html#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_it_normalized</span>(<span class="fu">c</span>(iris<span class="sc">$</span>Sepal.Length, <span class="cn">NA</span>)) <span class="co"># oops, if our data has an NA this doesn&#39;t work so well, does it?</span></span></code></pre></div>
<pre><code>##   [1] NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA
##  [26] NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA
##  [51] NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA
##  [76] NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA
## [101] NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA
## [126] NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA
## [151] NA</code></pre>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="control-flow-and-functions.html#cb280-1" aria-hidden="true" tabindex="-1"></a>make_it_normalized</span></code></pre></div>
<pre><code>## function(our_data){
##   
##   our_mean &lt;- mean(our_data) 
##   our_sd &lt;- sd(our_data)
##   (our_data - our_mean) / our_sd # remember that R will do vector math with scalars, so this &quot;recycles&quot; the scalars to the length of our_data
##   
## }
## &lt;bytecode: 0x7ff0dc8d1360&gt;</code></pre>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="control-flow-and-functions.html#cb282-1" aria-hidden="true" tabindex="-1"></a>make_it_normalized <span class="ot">&lt;-</span> <span class="cf">function</span>(our_data){</span>
<span id="cb282-2"><a href="control-flow-and-functions.html#cb282-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb282-3"><a href="control-flow-and-functions.html#cb282-3" aria-hidden="true" tabindex="-1"></a>  our_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(our_data, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># why do I set na.rm?</span></span>
<span id="cb282-4"><a href="control-flow-and-functions.html#cb282-4" aria-hidden="true" tabindex="-1"></a>  our_sd <span class="ot">&lt;-</span> <span class="fu">sd</span>(our_data, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># why do I set na.rm?</span></span>
<span id="cb282-5"><a href="control-flow-and-functions.html#cb282-5" aria-hidden="true" tabindex="-1"></a>  (our_data <span class="sc">-</span> our_mean) <span class="sc">/</span> our_sd <span class="co"># remember that R will do vector math with scalars, so this &quot;recycles&quot; the scalars to the length of our_data</span></span>
<span id="cb282-6"><a href="control-flow-and-functions.html#cb282-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb282-7"><a href="control-flow-and-functions.html#cb282-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb282-8"><a href="control-flow-and-functions.html#cb282-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make_it_normalized</span>(<span class="fu">c</span>(iris<span class="sc">$</span>Sepal.Length, <span class="cn">NA</span>)) <span class="co"># there we go</span></span></code></pre></div>
<pre><code>##   [1] -0.89767388 -1.13920048 -1.38072709 -1.50149039 -1.01843718 -0.53538397
##   [7] -1.50149039 -1.01843718 -1.74301699 -1.13920048 -0.53538397 -1.25996379
##  [13] -1.25996379 -1.86378030 -0.05233076 -0.17309407 -0.53538397 -0.89767388
##  [19] -0.17309407 -0.89767388 -0.53538397 -0.89767388 -1.50149039 -0.89767388
##  [25] -1.25996379 -1.01843718 -1.01843718 -0.77691058 -0.77691058 -1.38072709
##  [31] -1.25996379 -0.53538397 -0.77691058 -0.41462067 -1.13920048 -1.01843718
##  [37] -0.41462067 -1.13920048 -1.74301699 -0.89767388 -1.01843718 -1.62225369
##  [43] -1.74301699 -1.01843718 -0.89767388 -1.25996379 -0.89767388 -1.50149039
##  [49] -0.65614727 -1.01843718  1.39682886  0.67224905  1.27606556 -0.41462067
##  [55]  0.79301235 -0.17309407  0.55148575 -1.13920048  0.91377565 -0.77691058
##  [61] -1.01843718  0.06843254  0.18919584  0.30995914 -0.29385737  1.03453895
##  [67] -0.29385737 -0.05233076  0.43072244 -0.29385737  0.06843254  0.30995914
##  [73]  0.55148575  0.30995914  0.67224905  0.91377565  1.15530226  1.03453895
##  [79]  0.18919584 -0.17309407 -0.41462067 -0.41462067 -0.05233076  0.18919584
##  [85] -0.53538397  0.18919584  1.03453895  0.55148575 -0.29385737 -0.41462067
##  [91] -0.41462067  0.30995914 -0.05233076 -1.01843718 -0.29385737 -0.17309407
##  [97] -0.17309407  0.43072244 -0.89767388 -0.17309407  0.55148575 -0.05233076
## [103]  1.51759216  0.55148575  0.79301235  2.12140867 -1.13920048  1.75911877
## [109]  1.03453895  1.63835547  0.79301235  0.67224905  1.15530226 -0.17309407
## [115] -0.05233076  0.67224905  0.79301235  2.24217198  2.24217198  0.18919584
## [121]  1.27606556 -0.29385737  2.24217198  0.55148575  1.03453895  1.63835547
## [127]  0.43072244  0.30995914  0.67224905  1.63835547  1.87988207  2.48369858
## [133]  0.67224905  0.55148575  0.30995914  2.24217198  0.55148575  0.67224905
## [139]  0.18919584  1.27606556  1.03453895  1.27606556 -0.05233076  1.15530226
## [145]  1.03453895  1.03453895  0.55148575  0.79301235  0.43072244  0.06843254
## [151]          NA</code></pre>
</div>
</div>
<div id="control-structure---making-your-code-hustle-and-flow" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Control structure - making your code hustle and flow<a href="control-flow-and-functions.html#control-structure---making-your-code-hustle-and-flow" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<hr />
<p>In order to make use of R’s powerful tools for simulating data (and, later, analyzing it), we need to be able to give R instructions that take advantage ofthe fact that it can quickly and tirelessly do repetitive tasks. The idea of <a href="https://en.wikipedia.org/wiki/Control_flow">“<strong>control flow</strong>”</a> is a computer-science concept that, broadly, comprises the idea of anticipating all the things you want your program to do, and writing explicitly how to handle them. This is because, if you’ll recall, <em>the computer is very good at tedious, difficult tasks, but also requires completely precise instructions</em>.</p>
<p>Control flow can be visualized as the kind of decision chart that you’re very familiar with:</p>
<div class="figure">
<img src="Images/Week%203/If-Then-Else-diagram.svg.png" alt="" />
<p class="caption">A simple decision chart with conditional statements</p>
</div>
<div id="write-what-you-want-pseudo-code" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Write-what-you-want: Pseudo Code<a href="control-flow-and-functions.html#write-what-you-want-pseudo-code" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before we start getting into the technical details of how to build these control flows and tell your R program what to do, I want to give you 3 tools for thinking about programs that I’ve gathered from various colleagues over the years, and together help to build a non-mystical, non-technical approach to building your programs:</p>
<ol style="list-style-type: decimal">
<li>The very first thing you need to do when you sit down to write any program (or do anything, really), is <strong>define your goal</strong>. Literally. At the top of your R Markdown, R Script, text file, Word Document, Whiteboard, Joplin notebook, whatever, write the following phrase: “This program needs to do _____.” Then fill in the blank. Once you’ve defined what you are trying to do, figuring out <em>how</em> to do it is a much simpler task.</li>
<li>When you run into technically difficult problems (“I need R to draw a random number from 1 to 1000 and then access a matrix at that index for the p-value.”), put them into plain language, like you’re explaining what you’re trying to do to your friend who knows nothing about your project or programming: “Ok, first I need to draw a number from a hat, then tell the program that that number is the row I need, and then select the column which the p-value is stored in, which is the 5th column.” This is often called <a href="https://rubberduckdebugging.com/">“rubber duck debugging”</a>–keep a rubbber duck on your desk and explain to it.</li>
<li>Finally, use <a href="https://en.wikipedia.org/wiki/Pseudocode"><strong>pseudocode</strong></a>–a lot. Pseudocode really combines the first two steps here. You write, in plain but structured (bulleted or indented) language the steps you need your program to do. Any step that is complex probably needs to be broken down into substeps. Look at the pseudocode–if you know how to do each step in actual code (in R), then you can do it! Otherwise, keep breaking down the steps, using <code>?</code>, searching Stack Exchange, etc, until you can put together each step. Then write the code! For reference, here is the pseudocode for the random number example from above. <strong>Let’s actually write this into real code.</strong></li>
</ol>
<pre><code>create:
    data frame called &quot;results&quot;
repeat 100 times:
    roll a 6-sided die:
        if it&#39;s 1-2 write &quot;dog&quot; into the results data frame
        if it&#39;s 3-6 write &quot;cat&quot; into the data frame
print:
    how many times &quot;cat&quot; is in results</code></pre>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="control-flow-and-functions.html#cb285-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame called &quot;results&quot;</span></span>
<span id="cb285-2"><a href="control-flow-and-functions.html#cb285-2" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">animal =</span> <span class="fu">character</span>(<span class="dv">100</span>))</span>
<span id="cb285-3"><a href="control-flow-and-functions.html#cb285-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb285-4"><a href="control-flow-and-functions.html#cb285-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Roll a six-sided die 100 times, and if result is in 1-2, write &quot;dog&quot;, otherwise write &quot;cat&quot;</span></span>
<span id="cb285-5"><a href="control-flow-and-functions.html#cb285-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>) results<span class="sc">$</span>animal[i] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">1</span>) <span class="sc">&lt;</span> <span class="dv">3</span>, <span class="st">&quot;dog&quot;</span>, <span class="st">&quot;cat&quot;</span>)</span>
<span id="cb285-6"><a href="control-flow-and-functions.html#cb285-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb285-7"><a href="control-flow-and-functions.html#cb285-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Count how many times &quot;cat&quot; appears</span></span>
<span id="cb285-8"><a href="control-flow-and-functions.html#cb285-8" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(results[results<span class="sc">$</span>animal <span class="sc">==</span> <span class="st">&quot;cat&quot;</span>, ])</span></code></pre></div>
<pre><code>## [1] 65</code></pre>
<p>With that in mind, let’s formally learn about <strong>control flow</strong>!</p>
</div>
<div id="logical-conditions" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Logical conditions<a href="control-flow-and-functions.html#logical-conditions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We learned last week about the <code>logical</code> data type: <code>TRUE</code> and <code>FALSE</code> are the only contents of this kind of data, and they are reserved words in R (i.e., you can’t write somethig like <code>TRUE &lt;- "cat"</code>). The reason for this is these are used for boolean programming logic–control flow. Typically, these types of data aren’t something we store directly (we’d be more likely to store binary data as <code>0/1</code> instead)–rather, they are outcomes of <strong>logical conditions</strong> or tests that we ask about our data.</p>
<p>The most common of these that you will be using all the time are <strong>binary comparison</strong> operators, which ask about the relationship between two variables:</p>
<ul>
<li><code>x &lt; y</code>, <code>x &gt; y</code> - is <code>x</code> less (greater) than <code>y</code>?</li>
<li><code>x &lt;= y</code>, <code>x &gt;= y</code> - is <code>x</code> less (greater) than <em>or equal</em> to <code>y</code>?</li>
<li><code>x == y</code> - does <code>x</code> equal <code>y</code>. <strong>NB:</strong> note the <em>double</em> <code>=</code> here. Writing <code>x = y</code> as a logical test is a common novice R mistake.</li>
<li><code>x != y</code> - does <code>x</code> <em>not</em> equal <code>y</code>?</li>
</ul>
<p>Given the following value assignments, which of the logical statements above will return <code>TRUE</code>?</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="control-flow-and-functions.html#cb287-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb287-2"><a href="control-flow-and-functions.html#cb287-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">10</span></span></code></pre></div>
<p>A very useful binary operator that isn’t a “classic” one is <code>%in%</code>. This awkward-looking command asks whether the left-hand side is in the right hand side:</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="control-flow-and-functions.html#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;cats&quot;</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;cats&quot;</span>, <span class="st">&quot;dogs&quot;</span>, <span class="st">&quot;giraffes&quot;</span>) <span class="co"># is &quot;cats&quot; in this set of words?</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="control-flow-and-functions.html#cb290-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">%in%</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">100</span> <span class="co"># is 1 in the sequence from 2 to 100?</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>A second category of important logical conditions are the <code>is.*()</code> functions, where <code>*</code> stands in for a data type, for example <code>is.character()</code>. These return <code>TRUE</code> when the <code>class()</code> of the variable is evaluated to match the <code>*</code> in the name.</p>
<p>What? That statement was simpler than it sounded:</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="control-flow-and-functions.html#cb292-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.character</span>(<span class="st">&quot;dog&quot;</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="control-flow-and-functions.html#cb294-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(<span class="st">&quot;dog&quot;</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>There are two specific <code>is.*()</code> functions that are especially useful ask about two, special, reserved value/vector types in R: <code>NULL</code> and <code>NA</code>/<code>Inf</code>/<code>NaN</code>. <code>NULL</code> is a value that means the absence of a vector. The other 3 arise from division errors, from import errors/missing data, and from other processing errors. The key problem with all of these special values is that <strong>the above binary comparison operators (like <code>==</code>) do <em>not</em> work with these</strong>.</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="control-flow-and-functions.html#cb296-1" aria-hidden="true" tabindex="-1"></a>empty_value <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb296-2"><a href="control-flow-and-functions.html#cb296-2" aria-hidden="true" tabindex="-1"></a>wrong_value <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb296-3"><a href="control-flow-and-functions.html#cb296-3" aria-hidden="true" tabindex="-1"></a>empty_value <span class="sc">==</span> <span class="cn">NULL</span> <span class="co"># this is wrong, and returns a 0-length logical vector</span></span></code></pre></div>
<pre><code>## logical(0)</code></pre>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="control-flow-and-functions.html#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.null</span>(empty_value) <span class="co"># this works</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="control-flow-and-functions.html#cb300-1" aria-hidden="true" tabindex="-1"></a>wrong_value <span class="sc">==</span> <span class="cn">NA</span> <span class="co"># this is wrong, and will return NA (not TRUE)</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="control-flow-and-functions.html#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(wrong_value) <span class="co"># this works</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="conditional-statements" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Conditional statements<a href="control-flow-and-functions.html#conditional-statements" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Conditional statements are, essentially, choices that R has to make. They evaluate a logical condition, like those above (and often more complicated ones) and then execute some arbitrary blocks of code based on the logical condition. An alternative way to think about these are as <em>branching paths</em>–R looks at the branch in the path, chooses the first one that meets the stated condition, and then goes that way.</p>
<p>We encounter these all the time in decision trees.</p>
<div class="figure">
<img src="https://imgs.xkcd.com/comics/flow_charts.png" alt="" />
<p class="caption"><a href="https://xkcd.com/518">XKCD presents decision charts.</a></p>
</div>
</div>
<div id="if-statements" class="section level3 hasAnchor" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> IF statements<a href="control-flow-and-functions.html#if-statements" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>All functional programming language statements have some equivalent of R’s <code>if(&lt;conditional statement&gt;)</code>. Very simply, the conditional statement is evaluated, and <strong>if</strong> it is true, whatever comes after the <code>if()</code> is executed–otherwise R will just skip over it without trying to run it.</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="control-flow-and-functions.html#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="cn">TRUE</span>) <span class="fu">print</span>(<span class="st">&quot;this will always print&quot;</span>) <span class="co"># why will this always print?</span></span></code></pre></div>
<pre><code>## [1] &quot;this will always print&quot;</code></pre>
<p>With <code>if()</code> statements, as well as with the others we’ll go over below, we’re going to introduce <strong>“curly braces”</strong>: <code>{}</code>. We introduce these to allow our <code>if()</code> statements to control whether <em>multiple</em> lines get executed. Note that above we had a single <code>print()</code> follow the <code>if()</code>. What happens if we write:</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="control-flow-and-functions.html#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="cn">FALSE</span>) <span class="fu">print</span>(<span class="st">&quot;this will never print&quot;</span>)</span>
<span id="cb306-2"><a href="control-flow-and-functions.html#cb306-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">&quot;because the if() is always FALSE&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;because the if() is always FALSE&quot;</code></pre>
<p>Oops, we didn’t want either of those to print. How do we control <em>both</em> with the <code>if()</code>? We enclose everything with <strong>curly braces</strong>:</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="control-flow-and-functions.html#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="cn">FALSE</span>){</span>
<span id="cb308-2"><a href="control-flow-and-functions.html#cb308-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;this will never print&quot;</span>)</span>
<span id="cb308-3"><a href="control-flow-and-functions.html#cb308-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;because the if() is always FALSE&quot;</span>)</span>
<span id="cb308-4"><a href="control-flow-and-functions.html#cb308-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Now this works right. Notice that RStudio will helpfully indent the lines in the curly braces. This is a programming convention that shows you the order of precendence of the control flow–I personally think of this as all of the <code>print()</code> functions being <strong>under</strong> the <code>if()</code>.</p>
<p>We can string together multiple <code>if()</code> statements:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="control-flow-and-functions.html#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Shall we play a game?</span></span>
<span id="cb309-2"><a href="control-flow-and-functions.html#cb309-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb309-3"><a href="control-flow-and-functions.html#cb309-3" aria-hidden="true" tabindex="-1"></a>my_die_roll <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">1</span>) <span class="co"># roll a die for me</span></span>
<span id="cb309-4"><a href="control-flow-and-functions.html#cb309-4" aria-hidden="true" tabindex="-1"></a>your_die_roll <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">1</span>) <span class="co"># and one for you</span></span>
<span id="cb309-5"><a href="control-flow-and-functions.html#cb309-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(my_die_roll <span class="sc">&gt;</span> your_die_roll) <span class="fu">print</span>(<span class="st">&quot;I win&quot;</span>)</span>
<span id="cb309-6"><a href="control-flow-and-functions.html#cb309-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(your_die_roll <span class="sc">&gt;</span> my_die_roll) <span class="fu">print</span>(<span class="st">&quot;You win&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;You win&quot;</code></pre>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="control-flow-and-functions.html#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(my_die_roll <span class="sc">==</span> your_die_roll) <span class="fu">print</span>(<span class="st">&quot;A tie!&quot;</span>)</span></code></pre></div>
<p>Note that if two sequential <code>if()</code> statements are <em>both</em> true, they will both be evaluated. In general, your <code>if()</code> statements need to be <em>disjoint</em>: only one should be able to be true (at a given level in your decision tree).</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="control-flow-and-functions.html#cb312-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(my_die_roll <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="fu">print</span>(<span class="st">&quot;Nice try&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Nice try&quot;</code></pre>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="control-flow-and-functions.html#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(your_die_roll <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="fu">print</span>(<span class="st">&quot;You too&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;You too&quot;</code></pre>
<div id="else-statement" class="section level4 hasAnchor" number="3.2.4.1">
<h4><span class="header-section-number">3.2.4.1</span> ELSE statement<a href="control-flow-and-functions.html#else-statement" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>else</code> statement has to follow an <code>if()</code> statement. Notice that I don’t put any parentheses after the <code>else</code>, because it is not evaluating a condition. Instead, <code>else</code> executes the statement(s) after it if the preceding <code>if()</code> is <code>FALSE</code>:</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="control-flow-and-functions.html#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="dv">1</span>) <span class="sc">==</span> <span class="dv">1</span>) <span class="fu">print</span>(<span class="st">&quot;heads&quot;</span>) <span class="cf">else</span> <span class="fu">print</span>(<span class="st">&quot;tails&quot;</span>) <span class="co"># another game of coin flips</span></span></code></pre></div>
<pre><code>## [1] &quot;tails&quot;</code></pre>
<p>An oddity with R <code>else</code> statements is that they must be on the same line as the end of the <code>if()</code> statement. This is somewhat in contradiction to the rest of R syntax, which makes it hard to remember. If you get errors using <code>else</code>, try</p>
<ol style="list-style-type: decimal">
<li>Checking your line spacing</li>
<li>Using <code>{}</code> to surround both your <code>if()</code> and <code>else</code> blocks</li>
</ol>
</div>
<div id="other-conditionals" class="section level4 hasAnchor" number="3.2.4.2">
<h4><span class="header-section-number">3.2.4.2</span> Other conditionals<a href="control-flow-and-functions.html#other-conditionals" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>R provides a number of more complicated conditionals to make large sets of IF-ELSE statements easier to write and read. The most common is <code>ifelse()</code>, which let’s you combine the two statements in one:</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="control-flow-and-functions.html#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(<span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="dv">1</span>) <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&quot;heads&quot;</span>, <span class="st">&quot;tails&quot;</span>) <span class="co"># this is a silly way to use this!</span></span></code></pre></div>
<pre><code>## [1] &quot;tails&quot;</code></pre>
<p>More complicated are the base R <code>switch()</code> and the <code>dplyr::case_when()</code> functions, which evalaute a set of IF statements and automatically have a final ELSE statement. I will not give examples here, but they are worth examining when you start running into a lot of branching <code>if()</code> statements in your code.</p>
</div>
</div>
<div id="loops" class="section level3 hasAnchor" number="3.2.5">
<h3><span class="header-section-number">3.2.5</span> Loops<a href="control-flow-and-functions.html#loops" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>While conditional statements (<code>if()</code>) create forking paths in our code, <strong>loops</strong> execute some section of code repeatedly, often for a set number of times or until some condition is met. This is where R’s ability to do something an arbitrary number of times, very quickly, without making mistakes or getting bored is employed. We actually saw some <code>for()</code> loops in the example of random walks on the football field already, when we wanted to simulate 1000 different people making 16 different paths.</p>
<p>We will often use loops to <strong>iterate</strong> through some data structure. For example, we might want to run some kind of analysis once for every row of a dataframe. The relevant pseudocode which might help make this clearer might look something like this:</p>
<pre><code>Goal: Get the average of a set of 6 instrumental measurements of total sugars in a data frame of 1000 observations (1000 x 6 dataframe)

for every row in dataframe:
    get the 6 observations
    average the 6 observations
    store the average in a new vector
end</code></pre>
<p>In fact, the <code>for... end</code> structure is very similar to how R writes the main type of loop you’ll encounter and use.</p>
<div id="for-loops" class="section level4 hasAnchor" number="3.2.5.1">
<h4><span class="header-section-number">3.2.5.1</span> FOR loops<a href="control-flow-and-functions.html#for-loops" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The structure of a <code>for()</code> loop looks kind of like an <code>if()</code> statement, but within the parentheses is a <strong>sequence</strong> instead of a conditional statement. We’ve already learned about sequences today. The syntax looks like <code>for(counter in sequence)</code>, where <code>counter</code> is a variable that the <code>for()</code> loop <em>increments</em> on each iteration of the loop. The simplest example might be:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="control-flow-and-functions.html#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="fu">print</span>(i) <span class="co"># why does this look different than print(1:10)?</span></span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10</code></pre>
<p>This prototypical example has several key elements that are important:</p>
<ol style="list-style-type: decimal">
<li>The <em>counter</em> variable is defined in the <code>for()</code> statement, <em>not</em> with a <code>&lt;-</code> assignment as per normal</li>
<li>Statements <em>within</em> the for loop have access to the <em>counter</em> variable</li>
<li>Just like an <code>if()</code>, a single command can follow a <code>for()</code>, but otherwise we’ll need to enclose multiple statements with <code>{}</code></li>
</ol>
<p>Let’s look at a slightly more complicated <code>for()</code> statement to get a better intuition of what’s happening. Here, we’ll create a 100 x 10 matrix of random (normal) data, and use a <code>for()</code> loop to get the average of each row.</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="control-flow-and-functions.html#cb323-1" aria-hidden="true" tabindex="-1"></a>some_data <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>), <span class="at">nrow =</span> <span class="dv">100</span>, <span class="at">ncol =</span> <span class="dv">10</span>)</span>
<span id="cb323-2"><a href="control-flow-and-functions.html#cb323-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>){</span>
<span id="cb323-3"><a href="control-flow-and-functions.html#cb323-3" aria-hidden="true" tabindex="-1"></a>  row_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(some_data[i, ])</span>
<span id="cb323-4"><a href="control-flow-and-functions.html#cb323-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb323-5"><a href="control-flow-and-functions.html#cb323-5" aria-hidden="true" tabindex="-1"></a>row_mean</span></code></pre></div>
<pre><code>## [1] -0.04234701</code></pre>
<p>Huh? Shouldn’t we have 100 means, 1 for each row?</p>
<p>Well, we did calculate those means, but <em>we are writing a new value</em> to <code>row_mean</code> each time our loop executes. If we want to store them, we will have to create some place for them to go.</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="control-flow-and-functions.html#cb325-1" aria-hidden="true" tabindex="-1"></a>some_data <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>), <span class="at">nrow =</span> <span class="dv">100</span>, <span class="at">ncol =</span> <span class="dv">10</span>)</span>
<span id="cb325-2"><a href="control-flow-and-functions.html#cb325-2" aria-hidden="true" tabindex="-1"></a>row_mean_storage <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="dv">100</span>) <span class="co"># create a 100-space long numeric vector to hold our means</span></span>
<span id="cb325-3"><a href="control-flow-and-functions.html#cb325-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>){</span>
<span id="cb325-4"><a href="control-flow-and-functions.html#cb325-4" aria-hidden="true" tabindex="-1"></a>  row_mean_storage[i] <span class="ot">&lt;-</span> <span class="fu">mean</span>(some_data[i, ]) <span class="co"># put the i-th mean into the i-th slot in row_mean_storage</span></span>
<span id="cb325-5"><a href="control-flow-and-functions.html#cb325-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb325-6"><a href="control-flow-and-functions.html#cb325-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(row_mean_storage) <span class="co"># I don&#39;t want to print all 100 values, so let&#39;s look at the structure of the new vector to see if this worked</span></span></code></pre></div>
<pre><code>##  num [1:100] 0.0505 0.4107 0.3348 0.3465 -0.154 ...</code></pre>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="control-flow-and-functions.html#cb327-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(row_mean_storage)</span></code></pre></div>
<p><img src="03-control-flow_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<p>This illustrates two more important aspects of <code>for()</code> loops:</p>
<ol style="list-style-type: decimal">
<li>The “current” state of the loop is not saved in between loops unless you tell R to do so explicitly</li>
<li>The commands <em>under</em> the <code>for()</code> loop can access and modify variables outside the loop, but the reverse is not true (because of point 1, above)</li>
</ol>
<p>In actual R syntax, we need to recall what we’ve learned about <code>for()</code> loops to make sure they run correctly. Here is a nested for loop that makes this explicit.</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="control-flow-and-functions.html#cb328-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We&#39;re going to use brackets to be really clear about what the SCOPE of each for() loop is</span></span>
<span id="cb328-2"><a href="control-flow-and-functions.html#cb328-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb328-3"><a href="control-flow-and-functions.html#cb328-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(number <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>){ <span class="co"># we can call our indicator variable (like &#39;i&#39;) anything -- using descriptive names is clearer</span></span>
<span id="cb328-4"><a href="control-flow-and-functions.html#cb328-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(letter <span class="cf">in</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>)){ <span class="co"># recall that &#39;letters&#39; is a built in vector of a-z</span></span>
<span id="cb328-5"><a href="control-flow-and-functions.html#cb328-5" aria-hidden="true" tabindex="-1"></a>    combination <span class="ot">&lt;-</span> <span class="fu">paste</span>(number, letter, <span class="at">sep =</span> <span class="st">&quot; and &quot;</span>) <span class="co"># paste() is a utility function that PASTES a series of strings together</span></span>
<span id="cb328-6"><a href="control-flow-and-functions.html#cb328-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(combination)</span>
<span id="cb328-7"><a href="control-flow-and-functions.html#cb328-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb328-8"><a href="control-flow-and-functions.html#cb328-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;1 and a&quot;
## [1] &quot;1 and b&quot;
## [1] &quot;1 and c&quot;
## [1] &quot;1 and d&quot;
## [1] &quot;2 and a&quot;
## [1] &quot;2 and b&quot;
## [1] &quot;2 and c&quot;
## [1] &quot;2 and d&quot;
## [1] &quot;3 and a&quot;
## [1] &quot;3 and b&quot;
## [1] &quot;3 and c&quot;
## [1] &quot;3 and d&quot;</code></pre>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="control-flow-and-functions.html#cb330-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(combination)</span></code></pre></div>
<pre><code>## [1] &quot;3 and d&quot;</code></pre>
<p>There are two things to note here:</p>
<ol style="list-style-type: decimal">
<li>Each internal loop needs to fully complete before the external loop goes again - we have <code>"1 and a"</code>, <code>"1 and b"</code>, etc.</li>
<li>At the end of the entire loop, recall that our stored variable, because it was all the way inside the loop, is just the very last value: <code>"3 and d"</code></li>
</ol>
<div id="thinking-about-for-loops-in-context" class="section level5 hasAnchor" number="3.2.5.1.1">
<h5><span class="header-section-number">3.2.5.1.1</span> Thinking about <code>for</code> loops in context<a href="control-flow-and-functions.html#thinking-about-for-loops-in-context" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p><code>for()</code> loops can be used inside each other, and are often used to “walk through” a data frame. Here’s a real type of example: say you have a matrix in which each row is a sample of a different cider, and each column is a cider-chemistry quality parameter (TA, RS, etc). You may reasonably want to know, for each variable, which samples are above the average reading, and which are below. While there are a number of more efficient ways to do this, you can use a set of <code>for()</code> loops to do this. In pseudocode:</p>
<pre><code>Goal: create an indicator matrix that, for every reading in your data, tells you whether that reading is higher than the column average

create indicator_matrix that is the same shape and has the same row and column names as your data
for column in columns of your data
    store column average in col_average
    for row in rows of your data
        store your_data[row, column] &gt; col_average in indicator_matrix[row, column]
    end for
end for</code></pre>
</div>
</div>
<div id="while-loops" class="section level4 hasAnchor" number="3.2.5.2">
<h4><span class="header-section-number">3.2.5.2</span> WHILE loops<a href="control-flow-and-functions.html#while-loops" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Other programming languages prioritize a different type of loop that can also be used in R: the <code>while()</code> loop. The way one uses a <code>while()</code> loop is by writing <code>while(&lt;conditional statement&gt;)</code>. In this way, these are sort of like a looping <code>if()</code> statement: they will keep executing the code they enclose until the conditional statement becomes <code>FALSE</code>.</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="control-flow-and-functions.html#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a die and set it to 3</span></span>
<span id="cb333-2"><a href="control-flow-and-functions.html#cb333-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb333-3"><a href="control-flow-and-functions.html#cb333-3" aria-hidden="true" tabindex="-1"></a>die <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb333-4"><a href="control-flow-and-functions.html#cb333-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb333-5"><a href="control-flow-and-functions.html#cb333-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Roll the die until you get a 1</span></span>
<span id="cb333-6"><a href="control-flow-and-functions.html#cb333-6" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span>(die <span class="sc">&gt;</span> <span class="dv">1</span>) {</span>
<span id="cb333-7"><a href="control-flow-and-functions.html#cb333-7" aria-hidden="true" tabindex="-1"></a>  die <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">1</span>)</span>
<span id="cb333-8"><a href="control-flow-and-functions.html#cb333-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(die <span class="sc">&gt;</span> <span class="dv">1</span>) </span>
<span id="cb333-9"><a href="control-flow-and-functions.html#cb333-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;You rolled a &quot;</span>, die, <span class="st">&quot;, so you win!&quot;</span>))</span>
<span id="cb333-10"><a href="control-flow-and-functions.html#cb333-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span></span>
<span id="cb333-11"><a href="control-flow-and-functions.html#cb333-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">&quot;You rolled a 1, so you lose!&quot;</span>)</span>
<span id="cb333-12"><a href="control-flow-and-functions.html#cb333-12" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;You rolled a 3, so you win!&quot;
## [1] &quot;You rolled a 1, so you lose!&quot;</code></pre>
<p>I said that these kinds of loops are less common in R, and there is a good historical reason for that. R, while a complete programming language in a technical sense, is really built for data analysis. <code>for()</code> loops work with a known precondition: we set up a number of iterations (often based on the shape of our data) and set them running. <code>while()</code> loops tend to be more useful when we know less about our data–which is more the case when we’re looking for user input, or accepting data of an unknown type/shape/quantity. So <code>for()</code> loops, which are a little easier to think about and have a functionality that is closer to data analysis are preferred.</p>
</div>
<div id="future-programming-apply-and-map-families" class="section level4 hasAnchor" number="3.2.5.3">
<h4><span class="header-section-number">3.2.5.3</span> Future programming: <code>apply()</code> and <code>map()</code> families<a href="control-flow-and-functions.html#future-programming-apply-and-map-families" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>When reading Stack Exchange or Stack Overflow, you will see a lot of discussion of functions like <code>apply()</code> and <code>map()</code>. The term <strong>“vectorized”</strong> is often applied to these. The short summary of this idea is that, unlike loops, these functions take R vectors (remember that all R objects are vectors at heart) and apply functions to them in a very efficient way. These functions (and, really, programming paradigms) are more efficient and faster than <code>for()</code> and <code>while()</code> loops. This is true. It is also much harder to understand them off the bat, and for your needs isn’t really necessary. We will be returning to some of these functions in the following weeks, but right now I am 100% certain that loops and conditionals are enough to keep you properly occupied <code>for a while</code> (ha!).</p>
<p>As my mentor told me once: for research, <em>first</em> write the code so it works, <em>then</em> make it efficient… and often you can skip the second part, if you’re never going to run the code again!</p>
</div>
</div>
</div>
<div id="simulating-and-sampling-data-in-r" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Simulating and sampling data in R<a href="control-flow-and-functions.html#simulating-and-sampling-data-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<hr />
<p>Woof, even writing these notes I feel like we’ve gotten through a lot today. But we’re not quite done, because I want to spend a bit of time to start putting these tools.</p>
<p>Like many of my terms in the notes for this class, the terms “<strong>simulation</strong>” and “<strong>sampling</strong>” are used in extremely inexact ways that might horrify a statistician or computer scientist. But I think that the way I am using them will reflect how you’ll encounter them in the wild. So, to give some broad and inaccurate definitions (that nevertheless correspond to my internal conceptions):</p>
<blockquote>
<p>“Simulation” - creating data points (these could be single values or whole “cases” of data) that have random properties distributed according to the parameters you specify.</p>
<ul>
<li>For example, you might want to simulate 500 values drawn from the Normal distribution (the classic bell curve).</li>
<li>To simulate, you must know something about the “population” of values you are trying to simulate–this prior knowledge is often the barrier we as scientists face in constructing simulations.</li>
</ul>
</blockquote>
<blockquote>
<p>“Sampling” - to draw a subset of observations from an existing dataset, usually at random</p>
<ul>
<li>Sampling can be an alternative to simulation if we <em>assume that the population resembles our existing dataset</em>–this is called <strong>bootstrapping</strong></li>
<li>Sampling solves the problem for the scientist of <em>making decisions</em> about the prior properties of the population</li>
</ul>
</blockquote>
<div id="why-simulation-is-important" class="section level3 hasAnchor" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Why simulation is important<a href="control-flow-and-functions.html#why-simulation-is-important" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Simulation can sound like something exotic that is done in a fancy science-fiction-esque lab by people with intense computer skills. This can make it seem unapproachable or unrealistic for the average scientist, and it discourages us from making it part of our analytical practice. But the real truth is that the field of statistics and probability developed in the absence of computational power that enables simulation. It is an oversimplication (that I will make) to say that statistical theory was developed to fill this absence, but it is helpful to think this way.</p>
<p>Here is an illustration: in your basic stats class you probably learned about the <em>binomial distribution</em>, which describes the probability of a set number <code>k</code> of “successes” in <code>N</code> trials when the probability of a success is binary, with success probability <code>p</code> and failure probability <code>1 - p</code>. Oof, that’s a long way to say “the probability of getting <code>k</code> heads when you flip a coin <code>N</code> times,” but here we are.</p>
<p>But the reason we need the binomial distribution in the first place is because, when it was developed by Jacob Bernoulli in the 17th century, <strong>no-one wanted to flip thousands of coins to see what happened</strong>. So traditional statistics developed a rich toolbox to allow for the estimation and interpretation of the probabilities associated with common types of events.</p>
<div class="figure">
<img src="Images/Week%203/Jakob_Bernoulli.jpg" alt="" />
<p class="caption">Jacob Bernoulli, deriver of the binomial distribution, from <a href="https://en.wikipedia.org/wiki/Jacob_Bernoulli#/media/File:Jakob_Bernoulli.jpg">Wikipedia</a></p>
</div>
<div id="a-quick-diversion-data-science-vs-traditional-statistics" class="section level4 hasAnchor" number="3.3.1.1">
<h4><span class="header-section-number">3.3.1.1</span> A quick diversion: data science vs traditional statistics<a href="control-flow-and-functions.html#a-quick-diversion-data-science-vs-traditional-statistics" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Let’s take a minute to pause and remember the point of this class: to teach you to code and manage data with R in service of research. According to Andrew Gelman, a well-known statistician, statistics is probably a subfield of data science, which adds to statistical analysis a broader concern with, on the one hand, data management and cleaning (we’ll see this shortly) and, on the other, a focus on computational, algorithmic, or programmatic thinking for problem solving <span class="citation">(<a href="#ref-shah2020" role="doc-biblioref">Shah 2020</a>)</span>. So, according to this definition <span class="citation">(which seems to echo the thinking of other prominent writers <a href="#ref-bruce2017" role="doc-biblioref">Bruce and Bruce 2017</a>; <a href="#ref-wickham2017" role="doc-biblioref">Wickham and Grolemund 2017</a>)</span>, what we are largely focusing on in this class is data science.</p>
<p>I will go one further and particularly point out the textbook by <span class="citation">Bruce and Bruce (<a href="#ref-bruce2017" role="doc-biblioref">2017</a>)</span>, in which the authors emphasize the idea of <strong>exploratory data analysis</strong> as being key to data science. I think I endorse this idea–much of the traditional statistics that you might learn, say in STAT 5615, emphasizes the inferential aspect of statistics: being able to say the all important “significantly different at an <span class="math inline">\(\alpha &lt; 0.05\)</span> level” statement. As we’ll discuss throughout the second and third parts of the class, there are a bunch of problems with this approach, but I think that one that isn’t talked about as much is the lack of emphasis on <strong>exploration</strong> of data. This is for two reasons (as I see them):</p>
<ol style="list-style-type: decimal">
<li>We don’t teach good methods for really understanding the data we have, which leads to us blindly running statistical “tests” and claiming we understand the data</li>
<li>Scientists are going to explore the data anyway, but do so unsystematically–this leads to all kinds of bad outcomes like “p-hacking”. So we need to teach safe data exploration!</li>
</ol>
<p>Anyhow, this is a somewhat roundabout way of saying that “traditional statistics” as it’s taught–usually a progression from probability to parameter definition to binomial testing to z- and t-tests to ANOVA/regression–does a disservice to scientists, who increasingly work with data. We should start with tools that let us manipulate and explore data and build models from those (which, again, we will discuss in the latter parts of this course), rather than learning models first and then trying to understand how they fit to data.</p>
<p>One more attempt to rephrase these thoughts in order to make sure that I’ve clarified them: too many times I and my students have had the experience of understanding the traditional, statistical model/approach when it is taught in the classroom, and then being completely unable to flexibly and rigorously apply the model to <strong>our</strong> data. If we start from a place of data exploration and take a programmatic approach, we can instead understand how to go from our data to a model of our data without feeling so lost.</p>
</div>
</div>
<div id="predictable-sequences" class="section level3 hasAnchor" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Predictable sequences<a href="control-flow-and-functions.html#predictable-sequences" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>PHEW. That was a lot of feelings. Let’s talk about numbers, instead!</p>
<p>We started this section by talking about tools for generating data, randomly or nonrandomly. R has lots of utilities to help you do this built in, and more you can install from packages. We’re going to learn a few of the basics today, and we’ll get to more in the coming weeks.</p>
<p>The first set of tools we’re going to learn are tools for generating predictable sequences or sets of numbers. We’re going to learn about:</p>
<ul>
<li>The <code>:</code> operator</li>
<li>The <code>rep()</code> function</li>
<li>The <code>seq()</code> function</li>
</ul>
<div id="the-operator" class="section level4 hasAnchor" number="3.3.2.1">
<h4><span class="header-section-number">3.3.2.1</span> The <code>:</code> operator<a href="control-flow-and-functions.html#the-operator" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The first and in many ways friendliest operator for getting a sequence of numbers in R is super simple: <code>:</code>. Specifically, <code>&lt;from&gt;:&lt;to&gt;</code> will generate a <code>vector</code> of integers between <code>from</code> and <code>to</code>, inclusive.</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="control-flow-and-functions.html#cb335-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">17</span> <span class="co"># print the numbers 1 to 17</span></span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17</code></pre>
<p>This is extremely useful shorthand, but isn’t super flexible. It’s great for <strong>indexing</strong> from sets:</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="control-flow-and-functions.html#cb337-1" aria-hidden="true" tabindex="-1"></a>letters <span class="co"># &quot;letters&quot; is a built in vector in R of the English alphabet</span></span></code></pre></div>
<pre><code>##  [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;o&quot; &quot;p&quot; &quot;q&quot; &quot;r&quot; &quot;s&quot;
## [20] &quot;t&quot; &quot;u&quot; &quot;v&quot; &quot;w&quot; &quot;x&quot; &quot;y&quot; &quot;z&quot;</code></pre>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="control-flow-and-functions.html#cb339-1" aria-hidden="true" tabindex="-1"></a>letters[<span class="dv">5</span><span class="sc">:</span><span class="dv">12</span>] <span class="co"># get the 5-12 letters of the alphabet</span></span></code></pre></div>
<pre><code>## [1] &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot;</code></pre>
<p>We can use negative numbers at the start or stop, but the behavior is slightly unpredictable, so be careful to test what you’re doing before you include it as part of a larger function or analysis.</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="control-flow-and-functions.html#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span><span class="dv">1</span><span class="sc">:-</span><span class="dv">10</span> <span class="co"># gives the negative numbers from -1 to -10</span></span></code></pre></div>
<pre><code>##  [1]  -1  -2  -3  -4  -5  -6  -7  -8  -9 -10</code></pre>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="control-flow-and-functions.html#cb343-1" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="co"># gives all numbers between -1 and 10</span></span></code></pre></div>
<pre><code>##  [1] -1  0  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="control-flow-and-functions.html#cb345-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:-</span><span class="dv">10</span> <span class="co"># counts DOWN from 1 to -10</span></span></code></pre></div>
<pre><code>##  [1]   1   0  -1  -2  -3  -4  -5  -6  -7  -8  -9 -10</code></pre>
<p>The <code>:</code> always counts by 1, but it will count non-integer numbers if you want it to (not recommended).</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="control-flow-and-functions.html#cb347-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1.2</span><span class="sc">:</span><span class="dv">5</span> <span class="co"># Count from 1.2 to 5 (note, DOES NOT include 5 b/c that is &lt; 1 from 4.2)</span></span></code></pre></div>
<pre><code>## [1] 1.2 2.2 3.2 4.2</code></pre>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="control-flow-and-functions.html#cb349-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="fl">4.5</span> <span class="co"># Count from 1 to 4, will not include 4.5 b/c it is &lt; 1 from 4</span></span></code></pre></div>
<pre><code>## [1] 1 2 3 4</code></pre>
<p>We can’t skip numbers or make sequences that are at an interval different from 1 between sequential numbers.</p>
</div>
<div id="the-seq-function" class="section level4 hasAnchor" number="3.3.2.2">
<h4><span class="header-section-number">3.3.2.2</span> The <code>seq()</code> function<a href="control-flow-and-functions.html#the-seq-function" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>So if you want to do any of the above, the <code>seq()</code> (for “<strong>sequence</strong>”) function is your friend. This function will still take a start and end point, but by setting <strong>arguments</strong> in the function you can have much better flexibility with what you get.</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="control-flow-and-functions.html#cb351-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="st">&quot;seq&quot;</span>) <span class="co"># Run this command yourself to see the display</span></span></code></pre></div>
<p>The help file for <code>seq()</code> tells us that there are several arguments we will need to set:</p>
<ul>
<li><code>from =</code>, the number we want to start with</li>
<li><code>to =</code>, the number we want to end on</li>
<li><code>by =</code>, the increment we want each step to take</li>
</ul>
<p>So we might want to go from 0 to 10 by increments of 0.2:</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="control-flow-and-functions.html#cb352-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">by =</span> <span class="fl">0.2</span>)</span></code></pre></div>
<pre><code>##  [1]  0.0  0.2  0.4  0.6  0.8  1.0  1.2  1.4  1.6  1.8  2.0  2.2  2.4  2.6  2.8
## [16]  3.0  3.2  3.4  3.6  3.8  4.0  4.2  4.4  4.6  4.8  5.0  5.2  5.4  5.6  5.8
## [31]  6.0  6.2  6.4  6.6  6.8  7.0  7.2  7.4  7.6  7.8  8.0  8.2  8.4  8.6  8.8
## [46]  9.0  9.2  9.4  9.6  9.8 10.0</code></pre>
<p>Alternatively, we can set <code>length.out =</code> to the number of steps we want to take (rather than the increment). So say we want to go from 0 to 10 in 25 steps:</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="control-flow-and-functions.html#cb354-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">length.out =</span> <span class="dv">25</span>)</span></code></pre></div>
<pre><code>##  [1]  0.0000000  0.4166667  0.8333333  1.2500000  1.6666667  2.0833333
##  [7]  2.5000000  2.9166667  3.3333333  3.7500000  4.1666667  4.5833333
## [13]  5.0000000  5.4166667  5.8333333  6.2500000  6.6666667  7.0833333
## [19]  7.5000000  7.9166667  8.3333333  8.7500000  9.1666667  9.5833333
## [25] 10.0000000</code></pre>
</div>
<div id="the-rep-function" class="section level4 hasAnchor" number="3.3.2.3">
<h4><span class="header-section-number">3.3.2.3</span> The <code>rep()</code> function<a href="control-flow-and-functions.html#the-rep-function" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Many times we actually want to generate multiples of the same value. This is where the <code>rep()</code> (for <strong>repeat</strong>) function comes in:</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="control-flow-and-functions.html#cb356-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="at">x =</span> <span class="st">&quot;cool&quot;</span>, <span class="at">times =</span> <span class="dv">10</span>) <span class="co"># get a vector of 10 &quot;cool&quot;s</span></span></code></pre></div>
<pre><code>##  [1] &quot;cool&quot; &quot;cool&quot; &quot;cool&quot; &quot;cool&quot; &quot;cool&quot; &quot;cool&quot; &quot;cool&quot; &quot;cool&quot; &quot;cool&quot; &quot;cool&quot;</code></pre>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="control-flow-and-functions.html#cb358-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>), <span class="at">times =</span> <span class="dv">2</span>) <span class="co"># repeat the vector (1, 3, 5) twice</span></span></code></pre></div>
<pre><code>## [1] 1 3 5 1 3 5</code></pre>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="control-flow-and-functions.html#cb360-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>), <span class="at">each =</span> <span class="dv">2</span>) <span class="co"># now, repeat EACH ELEMENT of (1, 3, 5) twice</span></span></code></pre></div>
<pre><code>## [1] 1 1 3 3 5 5</code></pre>
<p>What happens if we run <code>rep(c(1, 3, 5), each = 2, times = 2)</code>? Does it matter if instead we write it with the order of “each” and “times” reversed?</p>
<p>OK, this is fun and all, but what’s the point? We frequently want to be able to use these kinds of sequences as ways to index data frames, or to create a new variable (like, for example, say we have 10 “treatment” and 10 “control” samples - how would you make a vector that has 10 “treatment” followed by 10 “control”?)</p>
</div>
</div>
<div id="random-numbers" class="section level3 hasAnchor" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> “Random” numbers<a href="control-flow-and-functions.html#random-numbers" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Above we’ve learned how to generate defined sequences of variables. But many times we want to generate <em>random</em> variables. For example, we might want to write a program that looked something like this (this is pseudocode and will not execute):</p>
<pre><code>create:
    data frame called &quot;results&quot;
repeat 100 times:
roll a 6-sided die:
    if it&#39;s 1-2 write &quot;dog&quot; into the results data frame
    if it&#39;s 3-6 write &quot;cat&quot; into the data frame
print:
    how many times &quot;cat&quot; is in results</code></pre>
<p>This is a trivial example, but I want to look carefully at the line <code>roll a 6-sided die</code>. Does a computer actually do that? Of course not. Instead, we would use some code combined with the software’s built in “Random Number Generator” (<strong>RNG</strong>) to generate a number in <code>c(1, 2, 3, 4, 5, 6)</code>. The ability to do this is key to both the statistical analysis we’re going to do later and the idea of “simulating” data, which we’ll discuss below.</p>
<div id="pseudorandomness-and-set.seed" class="section level4 hasAnchor" number="3.3.3.1">
<h4><span class="header-section-number">3.3.3.1</span> Pseudorandomness and <code>set.seed()</code><a href="control-flow-and-functions.html#pseudorandomness-and-set.seed" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Most computer systems, including R, don’t actually generate truly random numbers: they make <strong>pseudorandom</strong> numbers by using algorithms that provide sequences of numbers that have many of the qualities of statistical randomness (beyond the scope of this class), but that are not truly nonrandom. Information about R’s RNG can be found by using <code>?RNG</code>. It turns out there are a lot of options here beyond the scope of this class (and beyond my knowledge!), but more info on the “Mersenne Twister”, which is the default generator in R, <a href="https://en.wikipedia.org/wiki/Mersenne_Twister">can be found in Wikipedia</a>. Cool fact: Mersenne Primes, which these are based on, are of the form <span class="math inline">\(2^{N}-1\)</span>, where <span class="math inline">\(N\)</span> is <em>also</em> a prime number.</p>
<p>The main point to know about pseudorandom number generators is that, because they are in fact deterministic in terms of sequence generation, the user of a pseudo-RNG can make reproducible results <em>by starting the sequence at the same place</em>. In many R scripts, you will see something like <code>set.seed(&lt;number&gt;)</code>. What this does is set the “seed” generator for the pseudo-RNG to <code>&lt;number&gt;</code>. That means that results should be exactly reproducible (to the limits of computational precision) if they are started with the same seed. So, to run reproducible code, we’ll set a seed here:</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="control-flow-and-functions.html#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>) <span class="co"># this will not return anything</span></span></code></pre></div>
<p>This is especially useful when we are sampling from an existing distribution and want to be able to share our results with collaborators or in the future.</p>
</div>
<div id="random-uniform-numbers" class="section level4 hasAnchor" number="3.3.3.2">
<h4><span class="header-section-number">3.3.3.2</span> Random, uniform numbers<a href="control-flow-and-functions.html#random-uniform-numbers" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We are not going to be dealing with formal probability distributions much in this class. Just to get it out of the way, a probability distribution <span class="math inline">\(p(x)\)</span> has the following properties:</p>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(\forall x, p(x) ≥ 0\)</span></li>
<li><span class="math inline">\(\int{p(x)dx} = 1\)</span></li>
</ol>
<p>While I personally don’t find calculus <em>too</em> icky, I am not a mathematician and I don’t think naturally in a lot of these terms. So all these are telling us is that</p>
<ol style="list-style-type: decimal">
<li>The probability of any event <span class="math inline">\(x\)</span> is either 0 or positive–no such thing as negative probability</li>
<li>The total probability of <em>anything</em> happening is 1–something’s gotta happen</li>
</ol>
<p>With that out of the way, we can talk about the <strong>uniform probability distribution</strong>, which is a formal version of our intuition of a “random number”. The uniform distribution between A and B is just a way of saying that any outcome (number) between A and B is equally probable. So, if we have a uniform distribution between 0 and 1, it means any number in the <span class="math inline">\([0, 1]\)</span> interval is equally likely.</p>
<p>This is a long way to go to introduce the function in R for generating such numbers: <code>runif()</code>. This function has 3 arguments</p>
<ul>
<li><code>n =</code> is the number of random numbers we want to generate</li>
<li><code>min =</code> is A in our example - the lower bound</li>
<li><code>max =</code> is B in our example - the upper bound</li>
</ul>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="control-flow-and-functions.html#cb364-1" aria-hidden="true" tabindex="-1"></a><span class="fu">runif</span>(<span class="at">n =</span> <span class="dv">1</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">1</span>) <span class="co"># generate a single random number between 0 and 1</span></span></code></pre></div>
<pre><code>## [1] 0.1137034</code></pre>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="control-flow-and-functions.html#cb366-1" aria-hidden="true" tabindex="-1"></a><span class="fu">runif</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">100</span>) <span class="co"># generate 10 random numbers between 0 and 100</span></span></code></pre></div>
<pre><code>##  [1] 62.2299405 60.9274733 62.3379442 86.0915384 64.0310605  0.9495756
##  [7] 23.2550506 66.6083758 51.4251141 69.3591292</code></pre>
<p>Intuitively, we know that if we generate a lot of numbers from the uniform distribution they shouldn’t cluster together: they should be random. Let’s check this by plotting a histogram of 1e4 (10,000) random numbers between 0 and 100.</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="control-flow-and-functions.html#cb368-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">runif</span>(<span class="at">n =</span> <span class="fl">1e4</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">100</span>))</span></code></pre></div>
<p><img src="03-control-flow_files/figure-html/unnamed-chunk-39-1.png" width="672" /></p>
<p>Looks pretty ok! There isn’t any pattern in our histogram’s “bins”, which indicates that each one is as likely to be drawn as any other.</p>
<p>If we actually want to look at the “distribution” the standard visualization is the “density” curve, which gives the amount of probability at each point.</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="control-flow-and-functions.html#cb369-1" aria-hidden="true" tabindex="-1"></a><span class="fu">curve</span>(<span class="fu">dunif</span>(x, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">100</span>), <span class="at">from =</span> <span class="sc">-</span><span class="dv">10</span>, <span class="at">to =</span> <span class="dv">110</span>)</span></code></pre></div>
<p><img src="03-control-flow_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
<p>…that’s just a mesa! Which is good news, of course. Every point in <span class="math inline">\([0, 100]\)</span> has equal probability density, and everything else has 0. We’re good.</p>
<p>So we can use <code>runif()</code> to generate draws of random numbers in an interval when we don’t have any reason to think any one number is more likely than another. This describes a lot of situations we tend to describe–for example, the outcome of a dice roll, coin flip, etc. But this isn’t always the most realistic description.</p>
</div>
<div id="the-normal-distribution" class="section level4 hasAnchor" number="3.3.3.3">
<h4><span class="header-section-number">3.3.3.3</span> The normal distribution<a href="control-flow-and-functions.html#the-normal-distribution" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <strong>normal distribution</strong> is the other famous distribution we all know: it is a bell-shaped curve, which, in its standard form, is centered at 0. It has two “parameters”: <strong>mean</strong> and <strong>standard deviation</strong>. It is also super ugly in its canonical form–a combinaton of an exponential and a quadratic function. I am not going to type it out, because you’ve seen it and not memorized it, just like me. Instead, let’s talk about why we care about it–and why it’s even called the “normal” distribution. It looks like this:</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="control-flow-and-functions.html#cb370-1" aria-hidden="true" tabindex="-1"></a><span class="fu">curve</span>(<span class="fu">dnorm</span>(x, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>), <span class="at">from =</span> <span class="sc">-</span><span class="dv">3</span>, <span class="at">to =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="03-control-flow_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
<p>First off, the key properties of the normal distribution are that:</p>
<ul>
<li>It is centered at the mean</li>
<li>It is symmetrical</li>
<li>Most of the probability density is near the mean</li>
<li>More formally, ~2/3 of the probability density is within ±1 standard deviation of the mean</li>
</ul>
<p>But let’s try to be a little less formal and more useful: the normal distribution describes a situation in which we expect most of our observations to be near to the average, and the probability of seeing an observation very far from the mean is quite small. So when we expect our observations to tightly cluster around some average, the normal distribution will describe this situation well.</p>
<p>We can generate observations from the normal distribution using the <code>rnorm()</code> function. Notice the similarity in name? R has a bunch of <strong>r</strong>andom number generators that all start with “r”, followed by an indicator of the distribution they are sampling from (e.g., <code>rt()</code>, <code>rbinom()</code>, <code>rf()</code>). <code>rnorm()</code> takes the following arguments:</p>
<ul>
<li><code>n =</code> just like <code>runif()</code>, the number of numbers you want</li>
<li><code>mean =</code> the mean you expect to see most of your numbers near</li>
<li><code>sd =</code> the standard deviation of how far on average you want your numbers to go</li>
</ul>
<p>Let’s try it out with 1e4 observations again from a normal with mean = 20 and sd = 35:</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="control-flow-and-functions.html#cb371-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">rnorm</span>(<span class="at">n =</span> <span class="fl">1e4</span>, <span class="at">mean =</span> <span class="dv">20</span>, <span class="at">sd =</span> <span class="dv">35</span>))</span></code></pre></div>
<p><img src="03-control-flow_files/figure-html/unnamed-chunk-42-1.png" width="672" /></p>
<p>That looks about right–our bins aren’t suspicious. We have a bell shape. And you’ll notice most of the observations cluster around the mean value we specified, with spread decreasing rapidly as we move more than 35 units from the center in either direction.</p>
<p>We can look at some of the variations in normal distributions to see how changing these parameters might work:</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="control-flow-and-functions.html#cb372-1" aria-hidden="true" tabindex="-1"></a><span class="fu">curve</span>(<span class="fu">dnorm</span>(x, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>), <span class="at">from =</span> <span class="sc">-</span><span class="dv">5</span>, <span class="at">to =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">lwd =</span> <span class="dv">2</span>) <span class="co"># the &quot;standard&quot; normal</span></span>
<span id="cb372-2"><a href="control-flow-and-functions.html#cb372-2" aria-hidden="true" tabindex="-1"></a><span class="fu">curve</span>(<span class="fu">dnorm</span>(x, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">2</span>), <span class="at">from =</span> <span class="sc">-</span><span class="dv">5</span>, <span class="at">to =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">add =</span> <span class="cn">TRUE</span>) <span class="co"># a much more &quot;diffuse&quot; (higher sd) normal</span></span>
<span id="cb372-3"><a href="control-flow-and-functions.html#cb372-3" aria-hidden="true" tabindex="-1"></a><span class="fu">curve</span>(<span class="fu">dnorm</span>(x, <span class="at">mean =</span> <span class="dv">3</span>, <span class="at">sd =</span> <span class="dv">1</span>), <span class="at">from =</span> <span class="sc">-</span><span class="dv">5</span>, <span class="at">to =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;orange&quot;</span>, <span class="at">lty =</span> <span class="dv">3</span>, <span class="at">add =</span> <span class="cn">TRUE</span>) <span class="co"># a standard normal with mean shifted</span></span>
<span id="cb372-4"><a href="control-flow-and-functions.html#cb372-4" aria-hidden="true" tabindex="-1"></a><span class="fu">curve</span>(<span class="fu">dnorm</span>(x, <span class="at">mean =</span> <span class="sc">-</span><span class="fl">1.2</span>, <span class="at">sd =</span> <span class="fl">0.90</span>), <span class="at">from =</span> <span class="sc">-</span><span class="dv">5</span>, <span class="at">to =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;purple&quot;</span>, <span class="at">lty =</span> <span class="dv">4</span>, <span class="at">add =</span> <span class="cn">TRUE</span>) <span class="co"># a normal shifted and with less spread (lower sd)</span></span></code></pre></div>
<p><img src="03-control-flow_files/figure-html/unnamed-chunk-43-1.png" width="672" /></p>
<p>It’s called the “normal” distribution because there are many ways that these distributions crop up in “nature”. According to statistician Richard <span class="citation">McElreath (<a href="#ref-mcelreath2020" role="doc-biblioref">2020</a>)</span>, the normal distribution occurs whenever the underlying process that is generating the data add up random fluctuations will end up in a normal distribution, because the positive and negative large distributions will tend to cancel each other out in the long run, ending up with the familiar, bell-shaped curve clustered around the mean.</p>
<p>Here’s the example from <span class="citation">McElreath (<a href="#ref-mcelreath2020" role="doc-biblioref">2020</a>)</span>: <strong>imagine your 1000 acquaintances all line up on a football field on the halfway line, and, 16 times each, flip a coin and take 1 step forward if it’s heads and 1 step backwards if it’s tails.</strong> You’ll end up with a normal distribution of people around the halfway line, with a spread of about ±5 yards. But why do I bring up this (undoubtedly interesting) example? Because it’s actually really easy to <em>simulate</em> this example in R:</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="control-flow-and-functions.html#cb373-1" aria-hidden="true" tabindex="-1"></a>steps <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> <span class="dv">1000</span>, <span class="at">ncol =</span> <span class="dv">16</span>) <span class="co"># we make a nice matrix to store our results</span></span>
<span id="cb373-2"><a href="control-flow-and-functions.html#cb373-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(steps) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;step_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">16</span>) <span class="co"># each row is a person, each column is their step position</span></span>
<span id="cb373-3"><a href="control-flow-and-functions.html#cb373-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>){ <span class="co"># for each person, do the following steps</span></span>
<span id="cb373-4"><a href="control-flow-and-functions.html#cb373-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">16</span>){ <span class="co"># for each step, flip a coin</span></span>
<span id="cb373-5"><a href="control-flow-and-functions.html#cb373-5" aria-hidden="true" tabindex="-1"></a>    steps[i, j] <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>), <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">1</span>, <span class="at">mean =</span> ., <span class="at">sd =</span> <span class="dv">1</span>) <span class="co"># if the result is heads, step forward (+1) or backward (-1) with gaussian step size</span></span>
<span id="cb373-6"><a href="control-flow-and-functions.html#cb373-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb373-7"><a href="control-flow-and-functions.html#cb373-7" aria-hidden="true" tabindex="-1"></a>} </span>
<span id="cb373-8"><a href="control-flow-and-functions.html#cb373-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb373-9"><a href="control-flow-and-functions.html#cb373-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Now we have a matrix that shows what happens at each step.  We WANT a matrix</span></span>
<span id="cb373-10"><a href="control-flow-and-functions.html#cb373-10" aria-hidden="true" tabindex="-1"></a><span class="co"># that shows WHERE each person is at each step.  To do this we will use the</span></span>
<span id="cb373-11"><a href="control-flow-and-functions.html#cb373-11" aria-hidden="true" tabindex="-1"></a><span class="co"># cumsum() function, which stands for &quot;cumulative sum&quot;, meaning that at each</span></span>
<span id="cb373-12"><a href="control-flow-and-functions.html#cb373-12" aria-hidden="true" tabindex="-1"></a><span class="co"># step it will add all previous steps</span></span>
<span id="cb373-13"><a href="control-flow-and-functions.html#cb373-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb373-14"><a href="control-flow-and-functions.html#cb373-14" aria-hidden="true" tabindex="-1"></a>positions <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> <span class="dv">1000</span>, <span class="at">ncol =</span> <span class="dv">16</span>)</span>
<span id="cb373-15"><a href="control-flow-and-functions.html#cb373-15" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(positions) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;yards_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">16</span>)</span>
<span id="cb373-16"><a href="control-flow-and-functions.html#cb373-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb373-17"><a href="control-flow-and-functions.html#cb373-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>)</span>
<span id="cb373-18"><a href="control-flow-and-functions.html#cb373-18" aria-hidden="true" tabindex="-1"></a>  positions[i, ] <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(steps[i, ]) <span class="co"># for each person, set their yardage to the sum of their steps on all previous steps</span></span>
<span id="cb373-19"><a href="control-flow-and-functions.html#cb373-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb373-20"><a href="control-flow-and-functions.html#cb373-20" aria-hidden="true" tabindex="-1"></a>steps[<span class="dv">1</span>, ] <span class="co"># here are the steps that person 1 makes</span></span></code></pre></div>
<pre><code>##     step_1     step_2     step_3     step_4     step_5     step_6     step_7 
## -0.8024172  2.4660827 -0.1602998 -0.3775922 -1.5542999  0.8668254 -0.2922849 
##     step_8     step_9    step_10    step_11    step_12    step_13    step_14 
##  1.9071436 -2.3753898 -0.8606970  1.4902076  0.9353355  0.9484532 -0.3266756 
##    step_15    step_16 
##  0.5931884 -0.3117176</code></pre>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="control-flow-and-functions.html#cb375-1" aria-hidden="true" tabindex="-1"></a>positions[<span class="dv">1</span>, ] <span class="co"># and here is where they are in terms of yardage</span></span></code></pre></div>
<pre><code>##    yards_1    yards_2    yards_3    yards_4    yards_5    yards_6    yards_7 
## -0.8024172  1.6636655  1.5033657  1.1257735 -0.4285264  0.4382990  0.1460141 
##    yards_8    yards_9   yards_10   yards_11   yards_12   yards_13   yards_14 
##  2.0531577 -0.3222321 -1.1829290  0.3072786  1.2426140  2.1910672  1.8643916 
##   yards_15   yards_16 
##  2.4575800  2.1458625</code></pre>
<p>So we’d ideally like to see WHERE those people are. We’re going to use a set of packages called <code>tidyverse</code> and the <code>patchwork</code> package to easily plot this.</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="control-flow-and-functions.html#cb377-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb377-2"><a href="control-flow-and-functions.html#cb377-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb377-3"><a href="control-flow-and-functions.html#cb377-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4"><a href="control-flow-and-functions.html#cb377-4" aria-hidden="true" tabindex="-1"></a>step_plot <span class="ot">&lt;-</span> positions <span class="sc">%&gt;%</span> </span>
<span id="cb377-5"><a href="control-flow-and-functions.html#cb377-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb377-6"><a href="control-flow-and-functions.html#cb377-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">200</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-7"><a href="control-flow-and-functions.html#cb377-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">person =</span> <span class="fu">row_number</span>(), <span class="at">yards_0 =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-8"><a href="control-flow-and-functions.html#cb377-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">names_to =</span> <span class="st">&quot;step&quot;</span>,</span>
<span id="cb377-9"><a href="control-flow-and-functions.html#cb377-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;yardage&quot;</span>,</span>
<span id="cb377-10"><a href="control-flow-and-functions.html#cb377-10" aria-hidden="true" tabindex="-1"></a>               <span class="sc">-</span>person) <span class="sc">%&gt;%</span></span>
<span id="cb377-11"><a href="control-flow-and-functions.html#cb377-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">step =</span> <span class="fu">str_remove</span>(step, <span class="st">&quot;yards_&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb377-12"><a href="control-flow-and-functions.html#cb377-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> step,</span>
<span id="cb377-13"><a href="control-flow-and-functions.html#cb377-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> yardage,</span>
<span id="cb377-14"><a href="control-flow-and-functions.html#cb377-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> person)) <span class="sc">+</span></span>
<span id="cb377-15"><a href="control-flow-and-functions.html#cb377-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(person <span class="sc">==</span> <span class="dv">1</span>), </span>
<span id="cb377-16"><a href="control-flow-and-functions.html#cb377-16" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">x =</span> step, <span class="at">y =</span> yardage), </span>
<span id="cb377-17"><a href="control-flow-and-functions.html#cb377-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, </span>
<span id="cb377-18"><a href="control-flow-and-functions.html#cb377-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>,</span>
<span id="cb377-19"><a href="control-flow-and-functions.html#cb377-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb377-20"><a href="control-flow-and-functions.html#cb377-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb377-21"><a href="control-flow-and-functions.html#cb377-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb377-22"><a href="control-flow-and-functions.html#cb377-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-23"><a href="control-flow-and-functions.html#cb377-23" aria-hidden="true" tabindex="-1"></a>step_hist <span class="ot">&lt;-</span> positions <span class="sc">%&gt;%</span> </span>
<span id="cb377-24"><a href="control-flow-and-functions.html#cb377-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb377-25"><a href="control-flow-and-functions.html#cb377-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">person =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb377-26"><a href="control-flow-and-functions.html#cb377-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">names_to =</span> <span class="st">&quot;step&quot;</span>,</span>
<span id="cb377-27"><a href="control-flow-and-functions.html#cb377-27" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;yardage&quot;</span>,</span>
<span id="cb377-28"><a href="control-flow-and-functions.html#cb377-28" aria-hidden="true" tabindex="-1"></a>               <span class="sc">-</span>person) <span class="sc">%&gt;%</span></span>
<span id="cb377-29"><a href="control-flow-and-functions.html#cb377-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">step =</span> <span class="fu">str_remove</span>(step, <span class="st">&quot;yards_&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb377-30"><a href="control-flow-and-functions.html#cb377-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> yardage)) <span class="sc">+</span> </span>
<span id="cb377-31"><a href="control-flow-and-functions.html#cb377-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">24</span>) <span class="sc">+</span> </span>
<span id="cb377-32"><a href="control-flow-and-functions.html#cb377-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>step, <span class="at">nrow =</span> <span class="dv">4</span>) <span class="sc">+</span> </span>
<span id="cb377-33"><a href="control-flow-and-functions.html#cb377-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb377-34"><a href="control-flow-and-functions.html#cb377-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-35"><a href="control-flow-and-functions.html#cb377-35" aria-hidden="true" tabindex="-1"></a>step_plot <span class="sc">+</span> step_hist</span></code></pre></div>
<p><img src="03-control-flow_files/figure-html/unnamed-chunk-45-1.png" width="672" /></p>
<p>This doesn’t mean, McElreath goes on, that normal distributions are “true” or “inevitable”. Rather, he writes that assuming our data is normal (and either generating data through <code>rnorm()</code> or using simple models that use the normal distribution as our “null” knowledge) represents a “particular state of ignorance” <span class="citation">(<a href="#ref-mcelreath2020" role="doc-biblioref">McElreath 2020, 75</a>)</span>: we are saying we don’t know anything except that we think our data has a particular mean (“center”) and standard deviation (“tendency to vary from the mean”)–we don’t have any idea about <em>why</em> it’s this way, only that probabilistic distributions tends to “regress” to this distribution, and so we’re not comfortable giving any more info.</p>
</div>
<div id="summary" class="section level4 hasAnchor" number="3.3.3.4">
<h4><span class="header-section-number">3.3.3.4</span> Summary<a href="control-flow-and-functions.html#summary" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To quickly summarize, we can simulate using <code>runif()</code> when we want numbers drawn without any bias: only from a given range. When we think that our data has a tendency to cluster around a center, we can use <code>rnorm()</code> to simulate random numbers.</p>
</div>
</div>
<div id="sampling-from-existing-data" class="section level3 hasAnchor" number="3.3.4">
<h3><span class="header-section-number">3.3.4</span> Sampling from existing data<a href="control-flow-and-functions.html#sampling-from-existing-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>But what if we already have data? We then may want to draw random samples from that data for a couple of reasons:</p>
<ul>
<li>Our dataset is large and we want to get a representative subsample</li>
<li>We want to use our data for simulations</li>
</ul>
<p>R has a very simple, very powerful function for that: <code>sample()</code>.</p>
<p>The <code>sample()</code> function is at the heart of many simulations. We’ll be getting to them in the later 2/3 of this class, so right now we’ll just look at how it works. Try using <code>?sample</code> to get some details.</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="control-flow-and-functions.html#cb378-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="co"># here we simulate rolling a six-sided die 1 time</span></span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="control-flow-and-functions.html#cb380-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">1000</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>) <span class="co"># and here we simulate rolling that same die 1000 times</span></span></code></pre></div>
<pre><code>##    [1] 5 5 4 2 1 6 6 1 1 1 5 4 5 6 4 4 3 2 4 2 5 4 1 2 2 1 3 5 6 2 4 1 3 2 4 2 2
##   [38] 3 5 5 2 5 6 3 5 2 1 1 5 5 3 1 3 3 2 3 5 5 6 5 2 3 5 5 1 1 2 2 1 4 5 4 4 1
##   [75] 3 2 4 3 1 6 5 5 1 6 6 2 4 5 6 5 1 6 4 4 4 4 2 5 2 5 6 2 4 1 4 4 6 3 1 1 5
##  [112] 4 5 4 4 2 4 5 6 3 6 4 3 4 6 4 1 2 4 6 2 5 4 6 2 5 5 4 1 1 6 1 6 1 6 5 3 3
##  [149] 4 4 2 3 6 1 2 5 6 1 5 6 4 4 5 2 2 5 1 6 6 3 2 4 3 6 1 1 5 4 5 5 4 5 2 4 3
##  [186] 1 5 5 1 2 1 4 4 1 6 2 1 6 3 6 2 1 2 1 3 5 6 3 5 3 1 2 5 4 3 5 6 1 1 6 6 4
##  [223] 5 2 3 6 1 5 4 5 3 6 4 3 2 4 3 1 1 4 3 2 1 5 6 3 2 4 3 4 5 5 5 1 4 1 1 1 5
##  [260] 1 3 5 1 3 2 3 5 2 1 5 1 3 3 6 4 3 3 2 5 6 6 4 2 1 3 2 2 5 2 1 4 3 6 3 6 2
##  [297] 5 5 5 3 4 6 2 5 5 2 6 1 5 1 6 2 2 1 1 1 2 3 6 1 1 2 2 2 6 6 3 5 2 2 6 3 4
##  [334] 6 1 2 3 5 1 4 1 5 5 3 2 2 2 5 6 1 6 1 2 6 3 6 2 2 4 1 2 1 1 3 3 4 5 1 5 1
##  [371] 5 4 5 4 3 4 4 6 2 5 3 1 2 4 2 3 2 6 2 6 3 4 3 6 3 4 2 4 3 3 1 5 5 2 1 1 3
##  [408] 3 4 1 3 3 3 2 1 4 6 6 1 4 5 6 5 3 5 5 3 1 5 4 3 3 6 3 6 6 4 1 5 3 4 4 1 1
##  [445] 1 2 2 6 6 1 6 5 6 3 4 2 1 3 2 3 5 3 4 1 4 5 6 5 2 4 5 3 6 2 4 1 1 2 3 4 5
##  [482] 4 5 5 4 2 1 5 3 1 3 5 3 4 6 1 4 6 3 1 3 1 4 5 2 5 1 2 3 4 1 6 5 3 2 6 3 5
##  [519] 5 3 2 4 4 3 5 1 1 6 2 5 2 4 6 6 1 1 3 1 3 1 5 6 3 3 1 1 6 4 1 3 3 1 2 2 6
##  [556] 6 2 3 4 1 1 1 3 1 6 6 1 5 5 1 1 2 3 1 2 1 3 6 5 2 6 1 6 5 3 5 2 5 5 2 2 1
##  [593] 2 2 3 4 4 4 6 6 5 5 5 2 4 6 6 1 6 4 1 6 3 2 4 3 1 6 5 3 3 4 3 6 5 6 6 1 3
##  [630] 4 5 5 3 2 3 3 1 3 3 1 5 6 2 2 3 4 1 6 6 5 3 1 2 2 4 5 5 3 1 1 1 2 5 3 3 5
##  [667] 6 5 1 6 6 6 2 4 3 1 5 4 2 6 1 4 3 3 3 1 3 6 4 4 2 1 4 3 6 2 3 3 1 2 6 2 2
##  [704] 6 5 4 6 1 3 2 6 4 5 4 3 3 6 6 6 5 2 5 2 1 2 5 6 2 1 1 4 2 1 1 3 1 2 4 3 6
##  [741] 5 3 5 1 2 1 1 6 5 4 1 5 1 5 3 6 5 5 2 6 2 5 1 3 4 5 3 6 4 6 2 5 3 4 2 3 3
##  [778] 6 6 3 2 5 3 2 2 2 5 4 5 6 2 4 5 4 4 5 2 4 1 5 2 3 6 2 5 1 1 5 4 4 2 1 5 3
##  [815] 3 6 2 4 4 1 6 1 3 2 1 2 3 1 3 4 6 1 4 2 4 6 6 1 2 3 4 2 2 1 1 2 5 2 6 4 4
##  [852] 3 4 1 2 5 3 5 5 2 3 1 1 1 1 4 4 2 6 6 2 3 5 6 2 6 6 3 3 4 5 1 5 6 3 3 4 5
##  [889] 5 2 6 6 4 2 4 3 5 1 6 5 3 2 5 3 2 2 4 6 2 1 1 2 1 6 4 5 6 5 4 2 2 6 5 1 5
##  [926] 2 6 6 4 1 1 6 5 6 4 6 4 3 3 2 3 6 5 1 2 4 6 3 2 4 5 5 5 6 4 2 6 2 2 2 5 5
##  [963] 5 4 3 5 6 5 5 3 1 6 1 2 2 3 1 2 6 1 3 3 5 4 5 5 6 2 5 2 1 4 3 4 5 6 2 2 1
## [1000] 3</code></pre>
<p>What’s happening here? Well, the <code>sample()</code> function has the following arguments:</p>
<ul>
<li><code>x =</code> this is the thing you want to sample from. Usually it’s a vector of numbers.</li>
<li><code>size =</code> how big a sample do you want?</li>
<li><code>replace =</code> this is a TRUE/FALSE variable; if TRUE, then <code>x</code> is “refreshed” for every draw in <code>size</code></li>
<li><code>prob =</code> is a probability distribution with a probability for for each possible item in <code>x</code></li>
</ul>
<p>The first two arguments are simple: what are you sampling from, and how many things do you want in your sample? The second two are a little more complicated. We’ll come back to each later in the class, but they are both worth giving a little more intuition to right now. The idea of <strong>sampling without replacement</strong> is like drawing numbers in Bingo. Once you draw a number in Bingo, it can’t be called again. It is <em>not replaced</em>. This means that our probabilities change after each draw–if we are sampling with replacement from <span class="math inline">\(\{1, 2, 3\}\)</span> and we draw <span class="math inline">\(3\)</span> on the first time, we only have two options for the next draw: <span class="math inline">\(\{1, 2\}\)</span>. So the <em>probability</em> of drawing 1 is different in that second draw! On the other hand, <strong>sampling with replacement</strong> means that we put the number back in the Bingo tumbler… if we draw <span class="math inline">\(3\)</span> on the first draw in our toy example, in the second draw we <em>still have the same probability of drawing 3 again</em>.</p>
<p>The idea of giving a probability distribution to your possible results is really just the same thing as <strong>weighting</strong> your results. Going back to our example of a die, if we think it’s weighted to come up “6” 50% of the time, we can use this to set <code>prob = c(0.1, 0.1, 0.1, 0.1, 0.1, 0.5)</code>. Now our <code>sample()</code> function will have a 50% chance (probability) of rolling a 6, and we’ve told it the rest of the probability (the remaining 50%) is evenly distributed among the other 5 sides of the die.</p>
<p>Some comprehension questions:</p>
<ul>
<li>Why do we use <code>replace = TRUE</code> in the 1000-roll die example above?</li>
<li>What would happen if we used <code>prob = c(0, 0, 0, 1, 0, 0)</code> in the 1000-roll die example above?</li>
</ul>
<p>We can use sample to get us samples from data. Let’s look at, for example, the <code>mtcars</code> dataset. Say we want to only have 10 cars to examine. We can do the following to pull a random sample:</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="control-flow-and-functions.html#cb382-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(mtcars) <span class="co"># there are 32 rows (observations) in mtcars</span></span></code></pre></div>
<pre><code>## [1] 32</code></pre>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="control-flow-and-functions.html#cb384-1" aria-hidden="true" tabindex="-1"></a>our_sample_indices <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">32</span>, <span class="at">size =</span> <span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">FALSE</span>) <span class="co"># get 10 random numbers in [1:32]</span></span>
<span id="cb384-2"><a href="control-flow-and-functions.html#cb384-2" aria-hidden="true" tabindex="-1"></a>mtcars[our_sample_indices, ] <span class="co"># use the indexing functions to get the rows that correspond to our random numbers</span></span></code></pre></div>
<pre><code>##                      mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
## Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
## Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
## Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
## Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
## Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
## Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4</code></pre>
</div>
<div id="summary---sampling-and-simulation" class="section level3 hasAnchor" number="3.3.5">
<h3><span class="header-section-number">3.3.5</span> Summary - sampling and simulation<a href="control-flow-and-functions.html#summary---sampling-and-simulation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To sum up, we’ve gone over methods to produce both predictable sequences of data and to sample randomly, both from theoretical distributions (the normal and uniform distributions) and from data we already have. In later classes, we are going to combine these techniques with the control structure and function techniques from the rest of this week to let us sample and simulate real data, as well as to do statistical inference.</p>
</div>
</div>
<div id="references" class="section level2 unnumbered hasAnchor">
<h2>References<a href="control-flow-and-functions.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<hr />

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-bruce2017" class="csl-entry">
Bruce, Peter, and Andrew Bruce. 2017. <em>Practical <span>Statistics</span> for <span>Data Scientists</span></em>. <span>Sebastopol</span>: <span>O’Reilly</span>.
</div>
<div id="ref-mcelreath2020" class="csl-entry">
McElreath, Richard. 2020. <em>Statistical <span>Rethinking</span></em>. Second. <span>Boca Raton</span>: <span>CRC Press</span>.
</div>
<div id="ref-shah2020" class="csl-entry">
Shah, Chirag. 2020. <em>A Hands-on Introduction to Data Science</em>. <span>Cambridge</span>: <span>Cambridge University Press</span>.
</div>
<div id="ref-wickham2017" class="csl-entry">
Wickham, Hadley, and Garrett Grolemund. 2017. <em>R for <span>Data Science</span></em>. <span>Sebastopol</span>: <span>O’Reilly</span>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="extending-r-with-packages-and-r-markdown.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="wrangling-your-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/03-control-flow.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
